/*! Automatune Copyright (c) 2024 Maximillian Laumeister, see https://github.com/MaxLaumeister/automatune for license details */
function download(t,e,n){function i(t){return String(t)}var o=window,r="application/octet-stream",n=n||r,a=document,s=a.createElement("a"),u=(u=o.Blob||o.MozBlob||o.WebKitBlob||i).call?u.bind(o):Blob,c=e||"download";if("true"===String(this)&&(n=(t=[t,n])[0],t=t[1]),String(t).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(function(t){var t=t.split(/[:;,]/),e=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),i=n.length,o=0,r=new Uint8Array(i);for(;o<i;++o)r[o]=n.charCodeAt(o);return new u([r],{type:e})}(t),c):l(t);function l(t,e){var n;return"download"in s?(s.href=t,s.setAttribute("download",c),s.innerHTML="downloading...",a.body.appendChild(s),setTimeout(function(){s.click(),a.body.removeChild(s),!0===e&&setTimeout(function(){o.URL.revokeObjectURL(s.href)},250)},66),!0):"undefined"!=typeof safari?(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0):(n=a.createElement("iframe"),a.body.appendChild(n),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r)),n.src=t,void setTimeout(function(){a.body.removeChild(n)},333))}if(e=t instanceof u?t:new u([t],{type:n}),navigator.msSaveBlob)return navigator.msSaveBlob(e,c);if(o.URL)l(o.URL.createObjectURL(e),!0);else{if("string"==typeof e||e.constructor===i)try{return l("data:"+n+";base64,"+o.btoa(e))}catch(t){return l("data:"+n+","+encodeURIComponent(e))}(t=new FileReader).onload=function(t){l(this.result)},t.readAsDataURL(e)}return!0}!function(t){"undefined"!=typeof module&&module.exports?module.exports.browser=t():"function"==typeof define&&define.amd?define(t):this.bowser=t()}(function(){function t(e){function t(t){t=e.match(t);return t&&1<t.length&&t[1]||""}var n,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=!/like android/i.test(e)&&/android/i.test(e),r=t(/version\/(\d+(\.\d+)?)/i),a=/tablet/i.test(e),s=!a&&/[^-]mobi/i.test(e),r=(/opera|opr/i.test(e)?n={name:"Opera",opera:u,version:r||t(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?n={name:"Windows Phone",windowsphone:u,msie:u,version:t(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:u,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:u,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?(n={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},r&&(n.version=r)):/sailfish/i.test(e)?n={name:"Sailfish",sailfish:u,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:u,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(n={name:"Firefox",firefox:u,version:t(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=u)):/silk/i.test(e)?n={name:"Amazon Silk",silk:u,version:t(/silk\/(\d+(\.\d+)?)/i)}:o?n={name:"Android",version:r}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:u,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:u,version:r||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(n={name:"WebOS",webos:u,version:r||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=u)):n=/bada/i.test(e)?{name:"Bada",bada:u,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:u,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||r}:/safari/i.test(e)?{name:"Safari",safari:u,version:r}:{},/(apple)?webkit/i.test(e)?(n.name=n.name||"Webkit",n.webkit=u,!n.version&&r&&(n.version=r)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=u,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),o||n.silk?n.android=u:i&&(n[i]=u,n.ios=u),""),r=(i?r=(r=t(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):o?r=t(/android[ \/-](\d+(\.\d+)*)/i):n.windowsphone?r=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.webos?r=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?r=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?r=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(r=t(/tizen[\/\s](\d+(\.\d+)*)/i)),r&&(n.osversion=r),r.split(".")[0]);return a||"ipad"==i||o&&(3==r||4==r&&!s)||n.silk?n.tablet=u:(s||"iphone"==i||"ipod"==i||o||n.blackberry||n.webos||n.bada)&&(n.mobile=u),n.msie&&10<=n.version||n.chrome&&20<=n.version||n.firefox&&20<=n.version||n.safari&&6<=n.version||n.opera&&10<=n.version||n.ios&&n.osversion&&6<=n.osversion.split(".")[0]||n.blackberry&&10.1<=n.version?n.a=u:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6?n.c=u:n.x=u,n}var u=!0,e=t("undefined"!=typeof navigator?navigator.userAgent:"");return e._detect=t,e}),!function(){var o,a={},b=null,r=!0,s=!1;try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:r=!1}catch(t){r=!1}if(!r)if("undefined"!=typeof Audio)try{new Audio}catch(t){s=!0}else s=!0;r&&((o=void 0===b.createGain?b.createGainNode():b.createGain()).gain.value=1,o.connect(b.destination));function u(t){this._volume=1,this._muted=!1,this.usingWebAudio=r,this.ctx=b,this.noAudio=s,this._howls=[],this._codecs=t,this.iOSAutoEnable=!0}function t(t){var e=this;e._autoplay=t.autoplay||!1,e._buffer=t.buffer||!1,e._duration=t.duration||0,e._format=t.format||null,e._loop=t.loop||!1,e._loaded=!1,e._sprite=t.sprite||{},e._src=t.src||"",e._pos3d=t.pos3d||[0,0,-.5],e._volume=void 0!==t.volume?t.volume:1,e._urls=t.urls||[],e._rate=t.rate||1,e._model=t.model||null,e._onload=[t.onload||function(){}],e._onloaderror=[t.onloaderror||function(){}],e._onend=[t.onend||function(){}],e._onpause=[t.onpause||function(){}],e._onplay=[t.onplay||function(){}],e._onendTimer=[],e._webAudio=r&&!e._buffer,e._audioNode=[],e._webAudio&&e._setupAudioNode(),void 0!==b&&b&&v.iOSAutoEnable&&v._enableiOSAudio(),v._howls.push(e),e.load()}u.prototype={volume:function(t){var e=this;if(0<=(t=parseFloat(t))&&t<=1){for(var n in e._volume=t,r&&(o.gain.value=t),e._howls)if(e._howls.hasOwnProperty(n)&&!1===e._howls[n]._webAudio)for(var i=0;i<e._howls[n]._audioNode.length;i++)e._howls[n]._audioNode[i].volume=e._howls[n]._volume*e._volume;return e}return r?o.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e,n=this;for(e in n._muted=t,r&&(o.gain.value=t?0:n._volume),n._howls)if(n._howls.hasOwnProperty(e)&&!1===n._howls[e]._webAudio)for(var i=0;i<n._howls[e]._audioNode.length;i++)n._howls[e]._audioNode[i].muted=t},codecs:function(t){return this._codecs[t]},_enableiOSAudio:function(){var n,i=this;if(!b||!i._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent))return i._iOSEnabled=!1,n=function(){var t=b.createBuffer(1,1,22050),e=b.createBufferSource();e.buffer=t,e.connect(b.destination),void 0===e.start?e.noteOn(0):e.start(0),setTimeout(function(){e.playbackState!==e.PLAYING_STATE&&e.playbackState!==e.FINISHED_STATE||(i._iOSEnabled=!0,i.iOSAutoEnable=!1,window.removeEventListener("touchstart",n,!1))},0)},window.addEventListener("touchstart",n,!1),i}};var c,l,d,g,e=null,f={},v=(s||(e=new Audio,f={mp3:!!e.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}),new u(f));t.prototype={load:function(){var t=this,e=null;if(!s){for(var n,i,o,r,a=0;a<t._urls.length;a++){if(t._format)n=t._format;else{if(i=t._urls[a],!(n=(n=/^data:audio\/([^;,]+);/i.exec(i))||/\.([^.]+)$/.exec(i.split("?",1)[0])))return void t.on("loaderror");n=n[1].toLowerCase()}if(f[n]){e=t._urls[a];break}}if(e)return t._src=e,t._webAudio?c(t,e):((o=new Audio).addEventListener("error",function(){o.error&&4===o.error.code&&(u.noAudio=!0),t.on("loaderror",{type:o.error?o.error.code:0})},!1),t._audioNode.push(o),o.src=e,o._pos=0,o.preload="auto",o.volume=v._muted?0:t._volume*v.volume(),r=function(){t._duration=Math.ceil(10*o.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),o.removeEventListener("canplaythrough",r,!1)},o.addEventListener("canplaythrough",r,!1),o.load()),t}t.on("loaderror")},urls:function(t){var e=this;return t?(e.stop(),e._urls="string"==typeof t?[t]:t,e._loaded=!1,e.load(),e):e._urls},play:function(p,h){var m=this;return"function"==typeof p&&(h=p),p&&"function"!=typeof p||(p="_default"),m._loaded?m._sprite[p]?m._inactiveNode(function(t){t._sprite=p;var e,n,i,o,r,a=0<t._pos?t._pos:m._sprite[p][0]/1e3,s=0,u=(m._webAudio?(s=m._sprite[p][1]/1e3-t._pos,0<t._pos&&(a=m._sprite[p][0]/1e3+a)):s=m._sprite[p][1]/1e3-(a-m._sprite[p][0]/1e3),!(!m._loop&&!m._sprite[p][2])),c="string"==typeof h?h:Math.round(Date.now()*Math.random())+"";if(e={id:c,sprite:p,loop:u},l=setTimeout(function(){!m._webAudio&&u&&m.stop(e.id).play(p,e.id),m._webAudio&&!u&&(m._nodeById(e.id).paused=!0,m._nodeById(e.id)._pos=0,m._clearEndTimer(e.id)),m._webAudio||u||m.stop(e.id),m.on("end",c)},1e3*s),m._onendTimer.push({timer:l,id:e.id}),m._webAudio){var l=m._sprite[p][0]/1e3,d=m._sprite[p][1]/1e3;t.id=c,t.paused=!1,g(m,[u,l,d],c),m._playStart=b.currentTime,t.gain.value=m._volume,void 0===t.bufferSource.start?t.bufferSource.noteGrainOn(0,a,s):t.bufferSource.start(0,a,s)}else{if(4!==t.readyState&&(t.readyState||!navigator.isCocoonJS))return m._clearEndTimer(c),n=m,i=p,o=h,(r=t).addEventListener("canplaythrough",f,!1),m;t.readyState=4,t.id=c,t.currentTime=a,t.muted=v._muted||t.muted,t.volume=m._volume*v.volume(),setTimeout(function(){t.play()},0)}function f(){n.play(i,o),r.removeEventListener("canplaythrough",f,!1)}return m.on("play"),"function"==typeof h&&h(c),m}):"function"==typeof h&&h():m.on("load",function(){m.play(p,h)}),m},pause:function(t){var e=this;if(e._loaded){e._clearEndTimer(t);var n=t?e._nodeById(t):e._activeNode();if(n)if(n._pos=e.pos(null,t),e._webAudio){if(!n.bufferSource||n.paused)return e;n.paused=!0,void 0===n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();e.on("pause")}else e.on("play",function(){e.pause(t)});return e},stop:function(t){var e=this;if(e._loaded){e._clearEndTimer(t);var n=t?e._nodeById(t):e._activeNode();if(n)if(n._pos=0,e._webAudio){if(!n.bufferSource||n.paused)return e;n.paused=!0,void 0===n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0)}else e.on("play",function(){e.stop(t)});return e},mute:function(t){var e,n=this;return n._loaded?(e=t?n._nodeById(t):n._activeNode())&&(n._webAudio?e.gain.value=0:e.muted=!0):n.on("play",function(){n.mute(t)}),n},unmute:function(t){var e,n=this;return n._loaded?(e=t?n._nodeById(t):n._activeNode())&&(n._webAudio?e.gain.value=n._volume:e.muted=!1):n.on("play",function(){n.unmute(t)}),n},volume:function(t,e){var n,i=this;return 0<=(t=parseFloat(t))&&t<=1?(i._volume=t,i._loaded?(n=e?i._nodeById(e):i._activeNode())&&(i._webAudio?n.gain.value=t:n.volume=t*v.volume()):i.on("play",function(){i.volume(t,e)}),i):i._volume},loop:function(t){return"boolean"==typeof t?(this._loop=t,this):this._loop},sprite:function(t){return"object"==typeof t?(this._sprite=t,this):this._sprite},pos:function(t,e){var n=this;if(!n._loaded)return n.on("load",function(){n.pos(t)}),"number"==typeof t?n:n._pos||0;t=parseFloat(t);var i=e?n._nodeById(e):n._activeNode();if(i)return 0<=t?(n.pause(e),i._pos=t,n.play(i._sprite,e),n):n._webAudio?i._pos+(b.currentTime-n._playStart):i.currentTime;if(0<=t)return n;for(var o=0;o<n._audioNode.length;o++)if(n._audioNode[o].paused&&4===n._audioNode[o].readyState)return n._webAudio?n._audioNode[o]._pos:n._audioNode[o].currentTime},pos3d:function(t,e,n,i){var o,r=this;if(e=void 0!==e&&e?e:0,n=void 0!==n&&n?n:-.5,r._loaded){if(!(0<=t||t<0))return r._pos3d;r._webAudio&&(o=i?r._nodeById(i):r._activeNode())&&(r._pos3d=[t,e,n],o.panner.setPosition(t,e,n),o.panner.panningModel=r._model||"HRTF")}else r.on("play",function(){r.pos3d(t,e,n,i)});return r},fade:function(t,i,e,o,r){var a=this,n=Math.abs(t-i),s=i<t?"down":"up",u=n/.01,c=e/u;if(!a._loaded)return a.on("load",function(){a.fade(t,i,e,o,r)}),a;a.volume(t,r);for(var l=1;l<=u;l++)!function(){var t=a._volume+("up"==s?.01:-.01)*l,e=Math.round(1e3*t)/1e3,n=i;setTimeout(function(){a.volume(e,r),e===n&&o&&o()},c*l)}()},fadeIn:function(t,e,n){return this.volume(0).play().fade(0,t,e,n)},fadeOut:function(t,e,n,i){var o=this;return o.fade(o._volume,t,e,function(){n&&n(),o.pause(i),o.on("end")},i)},_nodeById:function(t){for(var e=this._audioNode[0],n=0;n<this._audioNode.length;n++)if(this._audioNode[n].id===t){e=this._audioNode[n];break}return e},_activeNode:function(){for(var t=null,e=0;e<this._audioNode.length;e++)if(!this._audioNode[e].paused){t=this._audioNode[e];break}return this._drainPool(),t},_inactiveNode:function(t){for(var e,n,i,o=this,r=null,a=0;a<o._audioNode.length;a++)if(o._audioNode[a].paused&&4===o._audioNode[a].readyState){t(o._audioNode[a]),r=!0;break}o._drainPool(),r||(o._webAudio?(e=o._setupAudioNode(),t(e)):(o.load(),e=o._audioNode[o._audioNode.length-1],n=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",i=function(){e.removeEventListener(n,i,!1),t(e)},e.addEventListener(n,i,!1)))},_drainPool:function(){for(var t=this,e=0,n=0;n<t._audioNode.length;n++)t._audioNode[n].paused&&e++;for(n=t._audioNode.length-1;0<=n&&!(e<=5);n--)t._audioNode[n].paused&&(t._webAudio&&t._audioNode[n].disconnect(0),e--,t._audioNode.splice(n,1))},_clearEndTimer:function(t){for(var e=0,n=0;n<this._onendTimer.length;n++)if(this._onendTimer[n].id===t){e=n;break}var i=this._onendTimer[e];i&&(clearTimeout(i.timer),this._onendTimer.splice(e,1))},_setupAudioNode:function(){var t=this,e=t._audioNode,n=t._audioNode.length;return e[n]=void 0===b.createGain?b.createGainNode():b.createGain(),e[n].gain.value=t._volume,e[n].paused=!0,e[n]._pos=0,e[n].readyState=4,e[n].connect(o),e[n].panner=b.createPanner(),e[n].panner.panningModel=t._model||"equalpower",e[n].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),e[n].panner.connect(e[n]),e[n]},on:function(t,e){var n=this["_on"+t];if("function"==typeof e)n.push(e);else for(var i=0;i<n.length;i++)e?n[i].call(this,e):n[i].call(this);return this},off:function(t,e){var n=this["_on"+t],i=e?e.toString():null;if(i){for(var o=0;o<n.length;o++)if(i===n[o].toString()){n.splice(o,1);break}}else this["_on"+t]=[];return this},unload:function(){for(var t=this,e=t._audioNode,n=0;n<t._audioNode.length;n++)e[n].paused||(t.stop(e[n].id),t.on("end",e[n].id)),t._webAudio?e[n].disconnect(0):e[n].src="";for(n=0;n<t._onendTimer.length;n++)clearTimeout(t._onendTimer[n].timer);var i=v._howls.indexOf(t);null!==i&&0<=i&&v._howls.splice(i,1),delete a[t._src]}},r&&(c=function(t,e){if(e in a)t._duration=a[e].duration,d(t);else if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);l(i.buffer,t,e)}else{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){l(r.response,t,e)},r.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete a[e],t.load())};try{r.send()}catch(t){r.onerror()}}},l=function(t,e,n){b.decodeAudioData(t,function(t){t&&d(e,a[n]=t)},function(t){e.on("loaderror")})},d=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},g=function(t,e,n){n=t._nodeById(n);n.bufferSource=b.createBufferSource(),n.bufferSource.buffer=a[t._src],n.bufferSource.connect(n.panner),n.bufferSource.loop=e[0],e[0]&&(n.bufferSource.loopStart=e[1],n.bufferSource.loopEnd=e[1]+e[2]),n.bufferSource.playbackRate.value=t._rate}),"function"==typeof define&&define.amd&&define(function(){return{Howler:v,Howl:t}}),"undefined"!=typeof exports&&(exports.Howler=v,exports.Howl=t),"undefined"!=typeof window&&(window.Howler=v,window.Howl=t)}(),!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(a){"use strict";var t,n="onselectstart"in document.createElement("div");a.widget("moogle.contextmenu",{version:"@VERSION",options:{autoTrigger:!0,delegate:null,hide:{effect:"fadeOut",duration:"fast"},ignoreParentSelect:!0,menu:null,position:null,preventContextMenuForPopup:!1,preventSelect:!1,show:{effect:"slideDown",duration:"fast"},taphold:!1,uiMenuOptions:{},beforeOpen:a.noop,blur:a.noop,close:a.noop,create:a.noop,createMenu:a.noop,focus:a.noop,open:a.noop,select:a.noop},_create:function(){var e,t=this.options;if(this.$headStyle=null,this.$menu=null,this.menuIsTemp=!1,this.currentTarget=null,t.preventSelect){e="#"+(a(this.element).is(document)?a("body"):this.element).uniqueId().attr("id")+" "+t.delegate+" { -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }",this.$headStyle=a("<style class='moogle-contextmenu-style' />").prop("type","text/css").appendTo("head");try{this.$headStyle.html(e)}catch(t){this.$headStyle[0].styleSheet.cssText=e}n&&this.element.delegate(t.delegate,"selectstart"+this.eventNamespace,function(t){t.preventDefault()})}this._createUiMenu(t.menu),e="contextmenu"+this.eventNamespace,t.taphold&&(e+=" taphold"+this.eventNamespace),this.element.delegate(t.delegate,e,a.proxy(this._openMenu,this))},_destroy:function(){this.element.undelegate(this.eventNamespace),this._createUiMenu(null),this.$headStyle&&(this.$headStyle.remove(),this.$headStyle=null)},_createUiMenu:function(t){var e;this.isOpen()&&(e=this.currentTarget,this._closeMenu(!0),this.currentTarget=e),this.menuIsTemp?this.$menu.remove():this.$menu&&this.$menu.menu("destroy").hide(),this.$menu=null,this.menuIsTemp=!1,t&&(a.isArray(t)?(this.$menu=a.moogle.contextmenu.createMenuMarkup(t),this.menuIsTemp=!0):this.$menu="string"==typeof t?a(t):t,this.$menu.hide().menu(a.extend(!0,{},this.options.uiMenuOptions,{blur:a.proxy(this.options.blur,this),create:a.proxy(this.options.createMenu,this),focus:a.proxy(this.options.focus,this),select:a.proxy(function(t,e){var n=a.moogle.contextmenu.isMenu(e.item),i=e.item.data("actionHandler");e.cmd=e.item.attr("data-command"),e.target=a(this.currentTarget),n&&this.options.ignoreParentSelect||(n=this._trigger.call(this,"select",t,e),!1!==(n=i?i.call(this,t,e):n)&&this._closeMenu.call(this),t.preventDefault())},this)})))},_openMenu:function(t){var e=this.options,n=e.position,i=this,o=!!t.isTrigger,r={menu:this.$menu,target:a(t.target),extraData:t.extraData,originalEvent:t};if(e.autoTrigger||o){if(this.currentTarget=t.target,t.preventDefault(),!1===this._trigger("beforeOpen",t,r))return this.currentTarget=null,!1;r.menu=this.$menu,a(document).bind("keydown"+this.eventNamespace,function(t){t.which===a.ui.keyCode.ESCAPE&&i._closeMenu()}).bind("mousedown"+this.eventNamespace+" touchstart"+this.eventNamespace,function(t){a(t.target).closest(".ui-menu-item").length||i._closeMenu()}),a.isFunction(n)&&(n=n(t,r)),n=a.extend({my:"left top",at:"left bottom",of:void 0===t.pageX?t.target:t,collision:"fit"},n),this.$menu.show().css({position:"absolute",left:0,top:0}).position(n).hide(),e.preventContextMenuForPopup&&this.$menu.bind("contextmenu"+this.eventNamespace,function(t){t.preventDefault()}),this._show(this.$menu,this.options.show,function(){i._trigger.call(i,"open",t,r)})}},_closeMenu:function(t){var e=this,t=!t&&this.options.hide;a(document).unbind("mousedown"+this.eventNamespace).unbind("touchstart"+this.eventNamespace).unbind("keydown"+this.eventNamespace),this.$menu.unbind("contextmenu"+this.eventNamespace),e.currentTarget=null,this._hide(this.$menu,t,function(){e._trigger("close")})},_setOption:function(t,e){"menu"===t&&this.replaceMenu(e),a.Widget.prototype._setOption.apply(this,arguments)},_getMenuEntry:function(t){return this.$menu.find("li[data-command="+t+"]")},close:function(){this.isOpen()&&this._closeMenu()},enableEntry:function(t,e){this._getMenuEntry(t).toggleClass("ui-state-disabled",!1===e)},getMenu:function(){return this.$menu},isOpen:function(){return!!this.$menu&&!!this.currentTarget},open:function(t,e){e=e||{};t=jQuery.Event("contextmenu",{target:t.get(0),extraData:e});return this.element.trigger(t)},replaceMenu:function(t){this._createUiMenu(t)},setEntry:function(t,e){var n=this._getMenuEntry(t);"string"==typeof e?a.moogle.contextmenu.updateTitle(n,e):(n.empty(),e.cmd=e.cmd||t,a.moogle.contextmenu.createEntryMarkup(e,n))},showEntry:function(t,e){this._getMenuEntry(t).toggle(!1!==e)}}),a.extend(a.moogle.contextmenu,{createMenuMarkup:function(t,e){var n,i,o;for(null==e&&(e=a("<ul class='ui-helper-hidden' />").appendTo("body")),n=0;n<t.length;n++)i=t[n],o=a("<li/>").appendTo(e),a.moogle.contextmenu.createEntryMarkup(i,o),a.isArray(i.children)&&(o=a("<ul/>").appendTo(o),a.moogle.contextmenu.createMenuMarkup(i.children,o));return e},replaceFirstTextNodeChild:function(t,e){t.contents().filter(function(){return 3===this.nodeType}).first().replaceWith(e)}}),t=a.ui.menu.version.match(/^(\d)\.(\d+)/),(t={major:parseInt(t[1],10),minor:parseInt(t[2],10)}).major<2&&t.minor<11?a.extend(a.moogle.contextmenu,{createEntryMarkup:function(t,e){var n=null;/[^\-\u2014\u2013\s]/.test(t.title)?(e.attr("data-command",t.cmd),n=a("<a/>",{html:""+t.title,href:"#"}).appendTo(e),a.isFunction(t.action)&&e.data("actionHandler",t.action),t.uiIcon&&n.append(a("<span class='ui-icon' />").addClass(t.uiIcon)),t.disabled&&e.addClass("ui-state-disabled"),a.isPlainObject(t.data)&&n.data(t.data)):e.text(t.title)},isMenu:function(t){return 0<t.has(">a[aria-haspopup='true']").length},updateTitle:function(t,e){a.moogle.contextmenu.replaceFirstTextNodeChild(a("a",t),e)}}):a.extend(a.moogle.contextmenu,{createEntryMarkup:function(t,e){/[^\-\u2014\u2013\s]/.test(t.title)?(e.attr("data-command",t.cmd).html(""+t.title),a.isFunction(t.action)&&e.data("actionHandler",t.action),t.uiIcon&&e.append(a("<span class='ui-icon' />").addClass(t.uiIcon)),t.disabled&&e.addClass("ui-state-disabled"),a.isPlainObject(t.data)&&e.data(t.data)):e.text(t.title)},isMenu:function(t){return t.is("[aria-haspopup='true']")},updateTitle:function(t,e){a.moogle.contextmenu.replaceFirstTextNodeChild(t,e)}})}),!function(o){var e={init:function(i){return i=o.extend({},o.fn.message.defaults,i),this.each(function(){var t,e,n=o(this);n.data("message")||(null!=(t=i.message)&&""!=t||(t=n.html(),i.message=t),e="<div class='ui-widget message-container'>",e=(e+="<div class='"+("info"==i.type?"ui-state-highlight":"ui-state-error")+" ui-corner-all' >")+"<p><span class='ui-icon "+("info"==i.type?"ui-icon-info":"ui-icon-alert")+"' style='float:left;'></span><span class='message-text'>"+t+"</span>",i.dismiss&&(e+="<span class='message-dismiss'>Click to dismiss.</span>"),e+="</p></div></div>",i.dismiss&&n.click(function(){o(this).hide("normal")}),n.html(e).show(),n.data("message",i))})},options:function(n){return this.each(function(){var t=o(this),e=t.data("message")||{};n=o.extend({},e,n),t.message("destroy").message("init",n)})},show:function(){o(this).show()},hide:function(){o(this).hide()},destroy:function(){return this.each(function(){var t=o(this),e=t.data("message");o(".message-container",t).remove(),t.html(e.message).css("display:none"),t.removeData("message")})}};o.fn.message=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void o.error("Method "+t+" does not exist on jQuery.message"):e.init.apply(this,arguments)},o.fn.message.defaults={message:"",type:"info",dismiss:!0}}(jQuery);var e=function(){"use strict";function d(t,e){postMessage({action:Mt,cbn:e,result:t})}function h(t){var e=[];return e[t-1]=void 0,e}function b(t,e){return n(t[0]+e[0],t[1]+e[1])}function E(t,e){return n=~~Math.max(Math.min(t[1]/a,2147483647),-2147483648)&~~Math.max(Math.min(e[1]/a,2147483647),-2147483648),(t=t=y(t)&y(e))<0&&(t+=a),[t,n*a];var n}function g(t,e){var n,i;return t[0]==e[0]&&t[1]==e[1]?0:(n=t[1]<0,i=e[1]<0,n&&!i||(n||!i)&&L(t,e)[1]<0?-1:1)}function n(t,e){var n,i;for(t%=0x10000000000000000,e=(e%=0x10000000000000000)-(n=e%a)+(i=Math.floor(t/a)*a),t=t-i+n;t<0;)t+=a,e-=a;for(;4294967295<t;)t-=a,e+=a;for(e%=0x10000000000000000;0x7fffffff00000000<e;)e-=0x10000000000000000;for(;e<-0x8000000000000000;)e+=0x10000000000000000;return[t,e]}function P(t,e){return t[0]==e[0]&&t[1]==e[1]}function v(t){return 0<=t?[t,0]:[t+a,-a]}function y(t){return 2147483648<=t[0]?~~Math.max(Math.min(t[0]-a,2147483647),-2147483648):~~Math.max(Math.min(t[0],2147483647),-2147483648)}function i(t){return t<=30?1<<t:i(30)*i(t-30)}function O(t,e){var n;if(e&=63,P(t,Nt))return e?M:t;if(t[1]<0)throw Error("Neg");return e=i(e),n=t[1]*e%0x10000000000000000,0x8000000000000000<=(n+=e=(t=t[0]*e)-t%a)&&(n-=0x10000000000000000),[t-=e,n]}function R(t,e){e=i(e&=63);return n(Math.floor(t[0]/e),t[1]/e)}function L(t,e){return n(t[0]-e[0],t[1]-e[1])}function I(t,e){return t.Mc=e,t.Lc=0,t.Vb=e.length,t}function c(t){return t.Lc>=t.Vb?-1:255&t.Mc[t.Lc++]}function B(t){return t.Mc=h(32),t.Vb=0,t}function G(t){var e=t.Mc;return e.length=t.Vb,e}function z(t,e){t.Mc[t.Vb++]=e<<24>>24}function D(t,e,n,i){H(e,n,t.Mc,t.Vb,i),t.Vb+=i}function H(t,e,n,i,o){for(var r=0;r<o;++r)n[i+r]=t[e+r]}function F(t,e,n,i,o){var r;if(g(i,k)<0)throw Error("invalid length "+i);t.Nb=i;var a=function(t){var e;for(t.v=h(4),t.a=[],t.d={},t.C=h(192),t.bb=h(12),t.gb=h(12),t.Ob=h(12),t.wc=h(12),t.Z=h(192),t.K=[],t.Lb=h(114),t.U=m({},4),t._=_t({}),t.i=_t({}),t.A={},t.m=[],t.R=[],t.hb=[],t.mc=h(16),t.x=h(4),t.O=h(4),t.Ub=[M],t.vc=[M],t.Kc=[0],t.fc=h(5),t.xc=h(128),t.vb=0,t.T=1,t.D=0,t.Fb=-1,t.nb=0,e=0;e<4096;++e)t.a[e]={};for(e=0;e<4;++e)t.K[e]=m({},6);return t}({}),s=a,u=s,c=1<<o.s;u.ab=c;for(var l,d=0;1<<d<c;++d);u.cc=2*d,s.n=o.f,u=s,o=o.m,l=u.T,u.T=o,u.b&&l!=u.T&&(u.wb=-1,u.b=null),s.eb=0,s.fb=3,s.Y=2,s.y=3,a.Gc=1;var f=a,o=n;f.fc[0]=9*(5*f.Y+f.eb)+f.fb<<24>>24;for(var p=0;p<4;++p)f.fc[1+p]=f.ab>>8*p<<24>>24;for(D(o,f.fc,0,5),r=0;r<64;r+=8)z(n,255&y(R(i,r)));t.ac=(a.S=0,a.kc=e,a.lc=0,(l=a).b||(u={},s=4,l.T||(s=2),function(t,e){t.rb=2<e,t.rb?(t.w=0,t.xb=4,t.N=66560):(t.w=2,t.xb=3,t.N=0)}(u,s),l.b=u),function(t,e,n){var i,o;if(null==t.V||t.u!=n||t.I!=e)for(t.I=e,t.oc=(1<<e)-1,t.u=n,o=1<<t.u+t.I,t.V=h(o),i=0;i<o;++i)t.V[i]=function(t){return t.ob=h(768),t}({})}(l.A,l.eb,l.fb),l.ab==l.wb&&l.Fb==l.n||(function(t,e,n,i,o){e<1073741567&&(t.Ec=16+(i>>1),function(t,e,n,i){t.Bc=e,t._b=n,e=e+n+i,null!=t.c&&t.Jb==e||(t.c=null,t.Jb=e,t.c=h(t.Jb)),t.H=t.Jb-n}(t,e+n,i+o,256+~~((e+n+i+o)/2)),t.ub=i,n=e+1,t.p!=n&&(t.M=h(2*(t.p=n))),o=65536,t.rb&&(o=e-1,16777216<(o=(o=(o=(o=(o|=o>>1)|o>>2)|o>>4)|o>>8)>>1|65535)&&(o>>=1),t.Fc=o,++o,o+=t.N),o!=t.sc)&&(t.qb=h(t.sc=o))}(l.b,l.ab,4096,l.n,274),l.wb=l.ab,l.Fb=l.n),a.d.zb=n,function(t){(function(t){t.l=0;for(var e=t.J=0;e<4;++e)t.v[e]=0})(t),function(t){t.qc=M,t.Ac=M,t.E=-1,t.Ib=1,t.Oc=0}(t.d),S(t.C),S(t.Z),S(t.bb),S(t.gb),S(t.Ob),S(t.wc),S(t.Lb),function(t){var e,n=1<<t.u+t.I;for(e=0;e<n;++e)S(t.V[e].ob)}(t.A);for(var e=0;e<4;++e)S(t.K[e].G);gt(t._,1<<t.Y),gt(t.i,1<<t.Y),S(t.U.G),t.Q=0,t.lb=0,t.q=0,t.s=0}(a),lt(a),ct(a),a._.pb=a.n+1-2,wt(a._,1<<a.Y),a.i.pb=a.n+1-2,wt(a.i,1<<a.Y),a.g=M,o=a,(t={}).cb=o,t.$=null,t.zc=1,t)}function $(t,e,n){for(var i,o,r,a="",s=[],u=0;u<5;++u){if(-1==(i=c(e)))throw Error("truncated input");s[u]=i<<24>>24}if(!function(t,e){var n,i,o,r,a;if(e.length<5)return;for(a=255&e[0],o=a%9,r=(a=~~(a/9))%5,a=~~(a/5),i=n=0;i<4;++i)n+=(255&e[1+i])<<8*i;return!(99999999<n)&&function(t,e,n,i){if(8<e||4<n||4<i)return;!function(t,e,n){var i,o;if(null==t.V||t.u!=n||t.I!=e)for(t.I=e,t.oc=(1<<e)-1,t.u=n,o=1<<t.u+t.I,t.V=h(o),i=0;i<o;++i)t.V[i]=function(t){return t.Hb=h(768),t}({})}(t.jb,n,e);n=1<<i;return ot(t.Mb,n),ot(t.sb,n),t.Dc=n-1,1}(t,o,r,a)&&function(t,e){return!(e<0)&&(t.Pb!=e&&(t.Pb=e,t.mb=Math.max(t.Pb,1),function(t,e){null!=t.Kb&&t.L==e||(t.Kb=h(e)),t.L=e,t.o=0,t.h=0}(t.B,Math.max(t.mb,4096))),1)}(t,n)}(r=function(t){t.B={},t.e={},t.Gb=h(192),t.Wb=h(12),t.Cb=h(12),t.Db=h(12),t.Eb=h(12),t.tb=h(192),t.kb=h(4),t.jc=h(114),t.Bb=l({},4),t.Mb=at({}),t.sb=at({}),t.jb={};for(var e=0;e<4;++e)t.kb[e]=l({},6);return t}({}),s))throw Error("corrupted input");for(u=0;u<64;u+=8){if(-1==(i=c(e)))throw Error("truncated input");a=(i=1==(i=i.toString(16)).length?"0"+i:i)+""+a}/^0+$|^f+$/i.test(a)?t.Nb=k:(o=parseInt(a,16),t.Nb=4294967295<o?k:v(o)),t.ac=(o=r,r=n,n=t.Nb,o.e.zb=e,nt(o.B),o.B.bc=r,function(t){t.B.h=0,t.B.o=0,S(t.Gb),S(t.tb),S(t.Wb),S(t.Cb),S(t.Db),S(t.Eb),S(t.jc),function(t){var e,n;for(n=1<<t.u+t.I,e=0;e<n;++e)S(t.V[e].Hb)}(t.jb);for(var e=0;e<4;++e)S(t.kb[e].G);st(t.Mb),st(t.sb),S(t.Bb.G),function(t){t.Ab=0,t.E=-1;for(var e=0;e<5;++e)t.Ab=t.Ab<<8|c(t.zb)}(t.e)}(o),o.W=0,o.ib=0,o.Jc=0,o.Ic=0,o.Qc=0,o.Nc=n,o.g=M,o.gc=0,function(t,e){return t.$=e,t.cb=null,t.zc=1,t}({},o))}function U(t,e){return t.c[t.f+t.o+e]}function V(t,e,n,i){var o,r;for(t.X&&t.o+e+i>t.h&&(i=t.h-(t.o+e)),++n,r=t.f+t.o+e,o=0;o<i&&t.c[r+o]==t.c[r+o-n];++o);return o}function q(t){return t.h-t.o}function j(t){var e,n,i,o;if(!t.X)for(;;){if(!(o=-t.f+t.Jb-t.h))return;if(e=t.bc,n=t.c,i=t.f+t.h,o=o,-1==(n=e.Lc>=e.Vb?-1:(o=Math.min(o,e.Vb-e.Lc),H(e.Mc,e.Lc,n,i,o),e.Lc+=o,o)))return t.yb=t.h,t.f+t.yb>t.H&&(t.yb=t.H-t.f),t.X=1;t.h+=n,t.h>=t.o+t._b&&(t.yb=t.h-t._b)}}function W(t,e){t.f+=e,t.yb-=e,t.o-=e,t.h-=e}function x(t){++t.k>=t.p&&(t.k=0);var e=t;if(++e.o,e.o>e.yb){if(e.f+e.o>e.H){var n,i,o=e,r=o.f+o.o-o.Bc;for(0<r&&--r,i=o.f+o.h-r,n=0;n<i;++n)o.c[n]=o.c[r+n];o.f-=r}j(e)}1073741823==t.o&&(e=t.o-t.p,tt(t.M,2*t.p,e),tt(t.qb,t.sc,e),W(t,e))}function tt(t,e,n){for(var i,o=0;o<e;++o)(i=t[o]||0)<=n?i=0:i-=n,t[o]=i}function o(t){var e=t.o-t.h;e&&(D(t.bc,t.Kb,t.h,e),t.o>=t.L&&(t.o=0),t.h=t.o)}function et(t,e){e=t.o-e-1;return e<0&&(e+=t.L),t.Kb[e]}function nt(t){o(t),t.bc=null}function _(t){return(t-=2)<4?t:3}function K(t){return t<4?0:t<10?t-3:t-6}function it(t){if(t.zc){if(t.cb){n=t,function(t,e,n,i){var o,r,a,s,u,c,l,d,f,p,h,m;if(e[0]=M,n[0]=M,i[0]=1,t.kc&&(t.b.bc=t.kc,function(t){t.f=0,t.o=0,t.h=0,t.X=0,j(t),t.k=0,W(t,-1)}(t.b),t.S=1,t.kc=null),!t.lc){if(t.lc=1,h=t.g,P(t.g,M)){if(!q(t.b))return dt(t,y(t.g));ht(t),p=y(t.g)&t.y,A(t.d,t.C,(t.l<<4)+p,0),t.l=K(t.l),r=U(t.b,-t.s),xt(X(t.A,y(t.g),t.J),t.d,r),t.J=r,--t.s,t.g=b(t.g,Et)}if(q(t.b))for(;;){if(c=function(t,e){var n,B,G,i,o,r,z,a,s,u,c,l,d,f,D,p,h,m,H,F,b,g,$,v,y,_,w,x,S,A,T,C,k,j,M,W,N,E,P,O,R,L,I;if(t.lb!=t.q)return l=t.a[t.q].r-t.q,t.nb=t.a[t.q].j,t.q=t.a[t.q].r,l;if(t.q=t.lb=0,t.Q?(c=t.vb,t.Q=0):c=ht(t),_=t.D,(v=q(t.b)+1)<2)return t.nb=-1,1;for(273<v&&(v=273),a=E=0;a<4;++a)t.x[a]=t.v[a],t.O[a]=V(t.b,-1,t.x[a],273),t.O[a]>t.O[E]&&(E=a);if(t.O[E]>=t.n)return t.nb=E,l=t.O[E],pt(t,l-1),l;if(c>=t.n)return t.nb=t.m[_-1]+4,pt(t,c-1),c;if(r=U(t.b,-1),p=U(t.b,-t.v[0]-1-1),c<2&&r!=p&&t.O[E]<2)return t.nb=-1,1;if(t.a[0].Hc=t.l,C=e&t.y,t.a[1].z=Q[t.C[(t.l<<4)+C]>>>2]+Z(X(t.A,e,t.J),7<=t.l,p,r),St(t.a[1]),h=Q[2048-t.C[(t.l<<4)+C]>>>2],N=h+Q[2048-t.bb[t.l]>>>2],p==r&&(P=N+function(t,e,n){return Q[t.gb[e]>>>2]+Q[t.Z[(e<<4)+n]>>>2]}(t,t.l,C),t.a[1].z>P)&&(t.a[1].z=P,function(t){t.j=0,t.t=0}(t.a[1])),(u=c>=t.O[E]?c:t.O[E])<2)return t.nb=t.a[1].j,1;t.a[1].r=0,t.a[0].Yb=t.x[0],t.a[0].Zb=t.x[1],t.a[0].$b=t.x[2],t.a[0].pc=t.x[3],s=u;for(;t.a[s--].z=268435455,2<=s;);for(a=0;a<4;++a)if(!((W=t.O[a])<2))for(j=N+J(t,a,t.l,C);i=j+Y(t.i,W-2,C),(S=t.a[W]).z>i&&(S.z=i,S.r=0,S.j=a,S.t=0),2<=--W;);if($=h+Q[t.bb[t.l]>>>2],s=2<=t.O[0]?t.O[0]+1:2,s<=c){for(w=0;s>t.m[w];)w+=2;for(;z=t.m[w+1],i=$+ft(t,z,s,C),(S=t.a[s]).z>i&&(S.z=i,S.r=0,S.j=z+4,S.t=0),s!=t.m[w]||(w+=2)!=_;++s);}for(n=0;;){if(++n==u)return ut(t,n);if(m=ht(t),_=t.D,m>=t.n)return t.vb=m,t.Q=1,ut(t,n);if(++e,T=t.a[n].r,R=t.a[n].t?(--T,K(R=t.a[n].yc?(R=t.a[t.a[n].r2].Hc,t.a[n].j2<4?R<7?8:11:R<7?7:10):t.a[T].Hc)):t.a[T].Hc,T==n-1?R=t.a[n].j?K(R):R<7?9:11:(R=t.a[n].t&&t.a[n].yc?(T=t.a[n].r2,A=t.a[n].j2,R<7?8:11):(A=t.a[n].j)<4?R<7?8:11:R<7?7:10,T=t.a[T],A<4?A?1==A?(t.x[0]=T.Zb,t.x[1]=T.Yb,t.x[2]=T.$b,t.x[3]=T.pc):2==A?(t.x[0]=T.$b,t.x[1]=T.Yb,t.x[2]=T.Zb,t.x[3]=T.pc):(t.x[0]=T.pc,t.x[1]=T.Yb,t.x[2]=T.Zb,t.x[3]=T.$b):(t.x[0]=T.Yb,t.x[1]=T.Zb,t.x[2]=T.$b,t.x[3]=T.pc):(t.x[0]=A-4,t.x[1]=T.Yb,t.x[2]=T.Zb,t.x[3]=T.$b)),t.a[n].Hc=R,t.a[n].Yb=t.x[0],t.a[n].Zb=t.x[1],t.a[n].$b=t.x[2],t.a[n].pc=t.x[3],T=t.a[n].z,r=U(t.b,-1),p=U(t.b,-t.x[0]-1-1),C=e&t.y,B=T+Q[t.C[(R<<4)+C]>>>2]+Z(X(t.A,e,U(t.b,-2)),7<=R,p,r),b=t.a[n+1],H=0,b.z>B&&(b.z=B,b.r=n,b.j=-1,b.t=0,H=1),h=T+Q[2048-t.C[(R<<4)+C]>>>2],N=h+Q[2048-t.bb[R]>>>2],p!=r||n>b.r&&!b.j||(P=N+(Q[t.gb[R]>>>2]+Q[t.Z[(R<<4)+C]>>>2]),b.z>=P&&(b.z=P,b.r=n,b.j=0,b.t=0,H=1)),y=q(t.b)+1,!((v=y=4095-n<y?4095-n:y)<2)){if(v>t.n&&(v=t.n),!H&&p!=r&&(I=Math.min(y-1,t.n),2<=(f=V(t.b,0,t.x[0],I)))){for(L=K(R),k=e+1&t.y,g=B+Q[2048-t.C[(L<<4)+k]>>>2]+Q[2048-t.bb[L]>>>2],x=n+1+f;u<x;)t.a[++u].z=268435455;i=g+(Y(t.i,f-2,k)+J(t,0,L,k)),(S=t.a[x]).z>i&&(S.z=i,S.r=n+1,S.j=0,S.t=1,S.yc=0)}for(O=2,M=0;M<4;++M)if(!((d=V(t.b,-1,t.x[M],v))<2)){D=d;do{for(;u<n+d;)t.a[++u].z=268435455}while(i=N+(Y(t.i,d-2,C)+J(t,M,R,C)),(S=t.a[n+d]).z>i&&(S.z=i,S.r=n,S.j=M,S.t=0),2<=--d);if(d=D,M||(O=d+1),d<y&&(I=Math.min(y-1-d,t.n),2<=(f=V(t.b,d,t.x[M],I)))){for(L=R<7?8:11,k=e+d&t.y,G=N+(Y(t.i,d-2,C)+J(t,M,R,C))+Q[t.C[(L<<4)+k]>>>2]+Z(X(t.A,e+d,U(t.b,d-1-1)),1,U(t.b,d-1-(t.x[M]+1)),U(t.b,d-1)),L=K(L),k=e+d+1&t.y,F=G+Q[2048-t.C[(L<<4)+k]>>>2],g=F+Q[2048-t.bb[L]>>>2],x=d+1+f;u<n+x;)t.a[++u].z=268435455;i=g+(Y(t.i,f-2,k)+J(t,0,L,k)),(S=t.a[n+x]).z>i&&(S.z=i,S.r=n+d+1,S.j=0,S.t=1,S.yc=1,S.r2=n,S.j2=M)}}if(v<m){for(m=v,_=0;m>t.m[_];_+=2);t.m[_]=m,_+=2}if(O<=m){for($=h+Q[t.bb[R]>>>2];u<n+m;)t.a[++u].z=268435455;for(w=0;O>t.m[w];)w+=2;for(d=O;;++d)if(o=t.m[w+1],i=$+ft(t,o,d,C),(S=t.a[n+d]).z>i&&(S.z=i,S.r=n,S.j=o+4,S.t=0),d==t.m[w]){if(d<y&&(I=Math.min(y-1-d,t.n),2<=(f=V(t.b,d,o,I)))){for(L=R<7?7:10,k=e+d&t.y,G=i+Q[t.C[(L<<4)+k]>>>2]+Z(X(t.A,e+d,U(t.b,d-1-1)),1,U(t.b,d-(o+1)-1),U(t.b,d-1)),L=K(L),k=e+d+1&t.y,F=G+Q[2048-t.C[(L<<4)+k]>>>2],g=F+Q[2048-t.bb[L]>>>2],x=d+1+f;u<n+x;)t.a[++u].z=268435455;i=g+(Y(t.i,f-2,k)+J(t,0,L,k)),(S=t.a[n+x]).z>i&&(S.z=i,S.r=n+d+1,S.j=0,S.t=1,S.yc=1,S.r2=n,S.j2=o+4)}if((w+=2)==_)break}}}}}(t,y(t.g)),d=t.nb,p=y(t.g)&t.y,s=(t.l<<4)+p,1==c&&-1==d)A(t.d,t.C,s,0),r=U(t.b,-t.s),m=X(t.A,y(t.g),t.J),t.l<7?xt(m,t.d,r):(l=U(t.b,-t.v[0]-1-t.s),function(t,e,n,i){var o,r,a,s,u=1,c=1;for(r=7;0<=r;--r)o=i>>r&1,s=c,u&&(s+=1+(a=n>>r&1)<<8,u=a==o),A(e,t.ob,s,o),c=c<<1|o}(m,t.d,l,r)),t.J=r,t.l=K(t.l);else{if(A(t.d,t.C,s,1),d<4){if(A(t.d,t.bb,t.l,1),d?(A(t.d,t.gb,t.l,1),1==d?A(t.d,t.Ob,t.l,0):(A(t.d,t.Ob,t.l,1),A(t.d,t.wc,t.l,d-2))):(A(t.d,t.gb,t.l,0),A(t.d,t.Z,s,1==c?0:1)),1==c?t.l=t.l<7?9:11:(yt(t.i,t.d,c-2,p),t.l=t.l<7?8:11),a=t.v[d],0!=d){for(u=d;1<=u;--u)t.v[u]=t.v[u-1];t.v[0]=a}}else{for(A(t.d,t.bb,t.l,0),t.l=t.l<7?7:10,yt(t._,t.d,c-2,p),m=bt(d-=4),l=_(c),w(t.K[l],t.d,m),4<=m&&(f=d-(o=(2|1&m)<<(s=(m>>1)-1)),m<14?function(t,e,n,i,o){var r,a,s=1;for(a=0;a<i;++a)A(n,t,e+s,r=1&o),s=s<<1|r,o>>=1}(t.Lb,o-m-1,t.d,s,f):(Tt(t.d,f>>4,s-4),At(t.U,t.d,15&f),++t.Qb)),a=d,u=3;1<=u;--u)t.v[u]=t.v[u-1];t.v[0]=a,++t.Rb}t.J=U(t.b,c-1-t.s)}if(t.s-=c,t.g=b(t.g,v(c)),!t.s){if(128<=t.Rb&&lt(t),16<=t.Qb&&ct(t),e[0]=t.g,n[0]=function(t){return b(b(v(t.Ib),t.qc),[4,0])}(t.d),!q(t.b))return dt(t,y(t.g));if(0<=g(L(t.g,h),[4096,0]))return t.lc=0,i[0]=0}}else dt(t,y(t.g))}}(n.cb,n.cb.Ub,n.cb.vc,n.cb.Kc),n.Sb=n.cb.Ub[0];if(n.cb.Kc[0]){{var e=n.cb;mt(e),e.d.zb=null}n.zc=0}}else{e=t;n=function(t){var e,n,i;if(i=y(t.g)&t.Dc,u(t.e,t.Gb,(t.W<<4)+i)){if(u(t.e,t.Wb,t.W))e=0,u(t.e,t.Cb,t.W)?(u(t.e,t.Db,t.W)?(u(t.e,t.Eb,t.W)?(n=t.Qc,t.Qc=t.Ic):n=t.Ic,t.Ic=t.Jc):n=t.Jc,t.Jc=t.ib,t.ib=n):u(t.e,t.tb,(t.W<<4)+i)||(t.W=t.W<7?9:11,e=1),e||(e=rt(t.sb,t.e,i)+2,t.W=t.W<7?8:11);else if(t.Qc=t.Ic,t.Ic=t.Jc,t.Jc=t.ib,e=2+rt(t.Mb,t.e,i),t.W=t.W<7?7:10,4<=(n=r(t.kb[_(e)],t.e))){if(i=(n>>1)-1,t.ib=(2|1&n)<<i,n<14)t.ib+=function(t,e,n,i){var o,r,a=1,s=0;for(r=0;r<i;++r)o=u(n,t,e+a),a=(a<<1)+o,s|=o<<r;return s}(t.jc,t.ib-n-1,t.e,i);else if(t.ib+=function(t,e){var n,i,o=0;for(n=e;0!=n;--n)t.E>>>=1,i=t.Ab-t.E>>>31,t.Ab-=t.E&i-1,o=o<<1|1-i,-16777216&t.E||(t.Ab=t.Ab<<8|c(t.zb),t.E<<=8);return o}(t.e,i-4)<<4,t.ib+=function(t,e){var n,i,o=1,r=0;for(i=0;t.F>i;++i)n=u(e,t.G,o),o=(o<<1)+n,r|=n<<i;return r}(t.Bb,t.e),t.ib<0)return-1==t.ib?1:-1}else t.ib=n;if(0<=g(v(t.ib),t.g)||t.ib>=t.mb)return-1;(function(t,e,n){var i=t.o-e-1;for(i<0&&(i+=t.L);0!=n;--n)i>=t.L&&(i=0),t.Kb[t.o++]=t.Kb[i++],t.o>=t.L&&o(t)})(t.B,t.ib,e),t.g=b(t.g,v(e)),t.gc=et(t.B,0)}else i=function(t,e,n){return t.V[((e&t.oc)<<t.u)+((255&n)>>>8-t.u)]}(t.jb,y(t.g),t.gc),t.gc=t.W<7?function(t,e){var n=1;for(;n=n<<1|u(e,t.Hb,n),n<256;);return n<<24>>24}(i,t.e):function(t,e,n){var i,o,r=1;do{if(o=n>>7&1,n<<=1,i=u(e,t.Hb,(1+o<<8)+r),r=r<<1|i,o!=i){for(;r<256;)r=r<<1|u(e,t.Hb,r);break}}while(r<256);return r<<24>>24}(i,t.e,et(t.B,t.ib)),function(t,e){t.Kb[t.o++]=e,t.o>=t.L&&o(t)}(t.B,t.gc),t.W=K(t.W),t.g=b(t.g,Et);return 0}(e.$);if(-1==n)throw Error("corrupted input");e.Sb=k,e.Pc=e.$.g,(n||0<=g(e.$.Nc,M)&&0<=g(e.$.g,e.$.Nc))&&(o(e.$.B),nt(e.$.B),e.$.e.zb=null,e.zc=0)}return t.zc}throw Error("bad state");var n}function ot(t,e){for(;e>t.P;++t.P)t.ec[t.P]=l({},3),t.hc[t.P]=l({},3)}function rt(t,e,n){return u(e,t.uc,0)?8+(u(e,t.uc,1)?8+r(t.tc,e):r(t.hc[n],e)):r(t.ec[n],e)}function at(t){return t.uc=h(2),t.ec=h(16),t.hc=h(16),t.tc=l({},8),t.P=0,t}function st(t){S(t.uc);for(var e=0;t.P>e;++e)S(t.ec[e].G),S(t.hc[e].G);S(t.tc.G)}function ut(t,e){var n,i,o,r;for(t.lb=e,o=t.a[e].r,i=t.a[e].j;t.a[e].t&&(St(t.a[o]),t.a[o].r=o-1,t.a[e].yc)&&(t.a[o-1].t=0,t.a[o-1].r=t.a[e].r2,t.a[o-1].j=t.a[e].j2),r=o,n=i,i=t.a[r].j,o=t.a[r].r,t.a[r].j=n,t.a[r].r=e,0<(e=r););return t.nb=t.a[0].j,t.q=t.a[0].r}function ct(t){for(var e=0;e<16;++e)t.mc[e]=function(t,e){var n,i,o=1,r=0;for(i=t.F;0!=i;--i)n=1&e,e>>>=1,r+=p(t.G[o],n),o=o<<1|n;return r}(t.U,e);t.Qb=0}function lt(t){for(var e,n,i,o,r,a,s,u=4;u<128;++u)r=bt(u),t.xc[u]=function(t,e,n,i){var o,r,a=1,s=0;for(r=n;0!=r;--r)o=1&i,i>>>=1,s+=Q[(2047&(t[e+a]-o^-o))>>>2],a=a<<1|o;return s}(t.Lb,(e=(2|1&r)<<(i=(r>>1)-1))-r-1,i,u-e);for(o=0;o<4;++o){for(n=t.K[o],a=o<<6,r=0;t.cc>r;++r)t.R[a+r]=f(n,r);for(r=14;t.cc>r;++r)t.R[a+r]+=(r>>1)-1-4<<6;for(s=128*o,u=0;u<4;++u)t.hb[s+u]=t.R[a+u];for(;u<128;++u)t.hb[s+u]=t.R[a+bt(u)]+t.xc[u]}t.Rb=0}function dt(t,e){var n;mt(t),n=e&(e=t).y,e.Gc&&(A(e.d,e.C,(e.l<<4)+n,1),A(e.d,e.bb,e.l,0),e.l=e.l<7?7:10,yt(e._,e.d,0,n),n=_(2),w(e.K[n],e.d,63),Tt(e.d,67108863,26),At(e.U,e.d,15));for(var i=0;i<5;++i)Ct(t.d)}function ft(t,e,n,i){var o=_(n);return(e<128?t.hb[128*o+e]:t.R[(o<<6)+((o=e)<131072?s[o>>6]+12:o<134217728?s[o>>16]+32:s[o>>26]+52)]+t.mc[15&e])+Y(t._,n-2,i)}function J(t,e,n,i){var o;return e?(o=Q[2048-t.gb[n]>>>2],1==e?o+=Q[t.Ob[n]>>>2]:o=(o+=Q[2048-t.Ob[n]>>>2])+p(t.wc[n],e-2)):(o=Q[t.gb[n]>>>2],o+=Q[2048-t.Z[(n<<4)+i]>>>2]),o}function pt(t,e){if(0<e){var n,i,o,r,a,s,u,c,l,d,f,p,h,m=t.b,b=e;do{if(m.h>=m.o+m.ub)c=m.ub;else if(c=m.h-m.o,m.xb>c){x(m);continue}for(l=m.o>m.p?m.o-m.p:0,i=m.f+m.o,h=m.rb?(h=N[255&m.c[i]]^255&m.c[i+1],m.qb[1023&h]=m.o,h^=(255&m.c[i+2])<<8,m.qb[1024+(65535&h)]=m.o,(h^N[255&m.c[i+3]]<<5)&m.Fc):255&m.c[i]^(255&m.c[i+1])<<8,o=m.qb[m.N+h],m.qb[m.N+h]=m.o,f=1+(m.k<<1),p=m.k<<1,s=u=m.w,n=m.Ec;;){if(o<=l||0==n--){m.M[f]=m.M[p]=0;break}if(r=m.o-o,r=(m.k>=r?m.k-r:m.k-r+m.p)<<1,d=m.f+o,m.c[d+(a=s<u?s:u)]==m.c[i+a]){for(;++a!=c&&m.c[d+a]==m.c[i+a];);if(a==c){m.M[p]=m.M[r],m.M[f]=m.M[1+r];break}}(255&m.c[i+a])>(255&m.c[d+a])?(m.M[p]=o,o=m.M[p=1+r],u=a):(m.M[f]=o,o=m.M[f=r],s=a)}x(m)}while(0!=--b);t.s+=e}}function ht(t){var e=0;return t.D=function(t,e){var n,i,o,r,a,s,u,c,l,d,f,p,h,m,b,g,v,y,_,w;if(t.h>=t.o+t.ub)h=t.ub;else if(h=t.h-t.o,t.xb>h)return x(t),0;for(m=t.o>t.p?t.o-t.p:0,i=t.f+t.o,b=1,l=c=g=0,w=t.rb?(c=1023&(w=N[255&t.c[i]]^255&t.c[i+1]),l=65535&(w^=(255&t.c[i+2])<<8),(w^N[255&t.c[i+3]]<<5)&t.Fc):255&t.c[i]^(255&t.c[i+1])<<8,o=t.qb[t.N+w]||0,t.rb&&(r=t.qb[c]||0,a=t.qb[1024+l]||0,t.qb[c]=t.o,t.qb[1024+l]=t.o,m<r&&t.c[t.f+r]==t.c[i]&&(e[g++]=b=2,e[g++]=t.o-r-1),m<a&&t.c[t.f+a]==t.c[i]&&(a==r&&(g-=2),e[g++]=b=3,e[g++]=t.o-a-1,r=a),0!=g)&&r==o&&(g-=2,b=1),t.qb[t.N+w]=t.o,y=1+(t.k<<1),_=t.k<<1,f=p=t.w,0!=t.w&&m<o&&t.c[t.f+o+t.w]!=t.c[i+t.w]&&(e[g++]=b=t.w,e[g++]=t.o-o-1),n=t.Ec;;){if(o<=m||0==n--){t.M[y]=t.M[_]=0;break}if(u=t.o-o,s=(t.k>=u?t.k-u:t.k-u+t.p)<<1,v=t.f+o,t.c[v+(d=f<p?f:p)]==t.c[i+d]){for(;++d!=h&&t.c[v+d]==t.c[i+d];);if(b<d&&(e[g++]=b=d,e[g++]=u-1,d==h)){t.M[_]=t.M[s],t.M[y]=t.M[1+s];break}}(255&t.c[i+d])>(255&t.c[v+d])?(t.M[_]=o,o=t.M[_=1+s],p=d):(t.M[y]=o,o=t.M[y=s],f=d)}return x(t),g}(t.b,t.m),0<t.D&&(e=t.m[t.D-2])==t.n&&(e+=V(t.b,e-1,t.m[t.D-1],273-e)),++t.s,e}function mt(t){t.b&&t.S&&(t.b.bc=null,t.S=0)}function bt(t){return t<2048?s[t]:t<2097152?s[t>>10]+20:s[t>>20]+40}function gt(t,e){S(t.db);for(var n=0;n<e;++n)S(t.Tb[n].G),S(t.Xb[n].G);S(t.dc.G)}function vt(t,e,n,i,o){var r=Q[t.db[0]>>>2],a=Q[2048-t.db[0]>>>2],s=a+Q[t.db[1]>>>2],u=a+Q[2048-t.db[1]>>>2],c=0;for(c=0;c<8;++c){if(n<=c)return;i[o+c]=r+f(t.Tb[e],c)}for(;c<16;++c){if(n<=c)return;i[o+c]=s+f(t.Xb[e],c-8)}for(;c<n;++c)i[o+c]=u+f(t.dc,c-8-8)}function yt(t,e,n,i){var o,r;o=t,e=e,r=i,(n=n)<8?(A(e,o.db,0,0),w(o.Tb[r],e,n)):(n-=8,A(e,o.db,0,1),n<8?(A(e,o.db,1,0),w(o.Xb[r],e,n)):(A(e,o.db,1,1),w(o.dc,e,n-8))),0==--t.nc[i]&&(vt(t,i,t.pb,t.Cc,272*i),t.nc[i]=t.pb)}function _t(t){var e=t;e.db=h(2),e.Tb=h(16),e.Xb=h(16),e.dc=m({},8);for(var n=0;n<16;++n)e.Tb[n]=m({},3),e.Xb[n]=m({},3);return t.Cc=[],t.nc=[],t}function Y(t,e,n){return t.Cc[272*n+e]}function wt(t,e){for(var n=0;n<e;++n)vt(t,n,t.pb,t.Cc,272*n),t.nc[n]=t.pb}function X(t,e,n){return t.V[((e&t.oc)<<t.u)+((255&n)>>>8-t.u)]}function xt(t,e,n){for(var i,o=1,r=7;0<=r;--r)A(e,t.ob,o,i=n>>r&1),o=o<<1|i}function Z(t,e,n,i){var o,r,a=1,s=7,u=0;if(e)for(;0<=s;--s)if(u+=p(t.ob[(1+(r=n>>s&1)<<8)+a],o=i>>s&1),a=a<<1|o,r!=o){--s;break}for(;0<=s;--s)u+=p(t.ob[a],o=i>>s&1),a=a<<1|o;return u}function St(t){t.j=-1,t.t=0}function l(t,e){return t.F=e,t.G=h(1<<e),t}function r(t,e){for(var n=1,i=t.F;0!=i;--i)n=(n<<1)+u(e,t.G,n);return n-(1<<t.F)}function m(t,e){return t.F=e,t.G=h(1<<e),t}function w(t,e,n){for(var i,o=1,r=t.F;0!=r;)A(e,t.G,o,i=n>>>--r&1),o=o<<1|i}function f(t,e){for(var n,i=1,o=0,r=t.F;0!=r;)o+=p(t.G[i],n=e>>>--r&1),i=(i<<1)+n;return o}function At(t,e,n){for(var i,o=1,r=0;t.F>r;++r)A(e,t.G,o,i=1&n),o=o<<1|i,n>>=1}function u(t,e,n){var i=e[n],o=(t.E>>>11)*i;return(-2147483648^o)>(-2147483648^t.Ab)?(t.E=o,e[n]=i+(2048-i>>>5)<<16>>16,-16777216&t.E||(t.Ab=t.Ab<<8|c(t.zb),t.E<<=8),0):(t.E-=o,t.Ab-=o,e[n]=i-(i>>>5)<<16>>16,-16777216&t.E||(t.Ab=t.Ab<<8|c(t.zb),t.E<<=8),1)}function S(t){for(var e=t.length-1;0<=e;--e)t[e]=1024}function A(t,e,n,i){var o=e[n],r=(t.E>>>11)*o;i?(t.Ac=b(t.Ac,E(v(r),[4294967295,0])),t.E-=r,e[n]=o-(o>>>5)<<16>>16):(t.E=r,e[n]=o+(2048-o>>>5)<<16>>16),-16777216&t.E||(t.E<<=8,Ct(t))}function Tt(t,e,n){for(var i=n-1;0<=i;--i)t.E>>>=1,1==(e>>>i&1)&&(t.Ac=b(t.Ac,v(t.E))),-16777216&t.E||(t.E<<=8,Ct(t))}function Ct(t){var e,n,i,o,r=y((n=t.Ac,i=32,o=R(n,i&=63),o=n[1]<0?b(o,O([2,0],63-i)):o));if(0!=r||g(t.Ac,[4278190080,0])<0){for(t.qc=b(t.qc,v(t.Ib)),e=t.Oc;z(t.zb,e+r),e=255,0!=--t.Ib;);t.Oc=y(t.Ac)>>>24}++t.Ib,t.Ac=O(E(t.Ac,[16777215,0]),8)}function p(t,e){return Q[(2047&(t-e^-e))>>>2]}function T(t){return t[1]+t[0]}var kt,Mt=3,C="function"==typeof setImmediate?setImmediate:setTimeout,a=4294967296,k=[4294967295,-a],Nt=[0,-0x8000000000000000],M=[0,0],Et=[1,0],N=function(){for(var t,e,n=[],i=0;i<256;++i){for(e=i,t=0;t<8;++t)0!=(1&e)?e=e>>>1^-306674912:e>>>=1;n[i]=e}return n}(),s=function(){for(var t,e,n=2,i=[0,1],o=2;o<22;++o)for(e=1<<(o>>1)-1,t=0;t<e;++t,++n)i[n]=o<<24>>24;return i}(),Q=function(){for(var t,e,n=[],i=8;0<=i;--i)for(t=1<<9-i,e=1<<9-i-1;e<t;++e)n[e]=(i<<6)+(t-e<<6>>>9-i-1);return n}(),Pt=(kt=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}],function(t){return kt[t-1]||kt[6]});return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(t){t&&t.ic&&(2==t.ic.action?e.decompress(t.ic.ic,t.ic.cbn):1==t.ic.action&&e.compress(t.ic.ic,t.ic.Rc,t.ic.cbn))}),{compress:function(t,e,i,o){var r,a,n,s={};"function"!=typeof i&&(a=i,i=o=0),s.c=(n={},t=function(t){var e,n,i,o=[],r=0,a=t.length;if("object"==typeof t)return t;for(var s=t,u=a,c=o,l=0,d=0;d<u;++d)c[l++]=s.charCodeAt(d);for(i=0;i<a;++i)1<=(e=o[i])&&e<=127?++r:r+=!e||128<=e&&e<=2047?2:3;for(n=[],i=r=0;i<a;++i)1<=(e=o[i])&&e<=127?n[r++]=e<<24>>24:(!e||128<=e&&e<=2047?n[r++]=(192|e>>6&31)<<24>>24:(n[r++]=(224|e>>12&15)<<24>>24,n[r++]=(128|e>>6&63)<<24>>24),n[r++]=(128|63&e)<<24>>24);return n}(t),e=Pt(e),n.rc=B({}),F(n,I({},t),n.rc,v(t.length),e),n),o?o(0):void 0!==a&&d(0,a),C(function t(){for(var e,n=(new Date).getTime();it(s.c.ac);)if(r=T(s.c.ac.Sb)/T(s.c.Nb),200<(new Date).getTime()-n)return o?o(r):void 0!==a&&d(r,a),C(t,0),0;o?o(1):void 0!==a&&d(1,a),e=G(s.c.rc),i?i(e):void 0!==a&&postMessage({action:1,cbn:a,result:e})},0)},decompress:function(t,o,r){var a,s,u,c,e,l={};"function"!=typeof o&&(s=o,o=r=0),l.d=(t=t,(e={}).rc=B({}),$(e,I({},t),e.rc),e),c=T(l.d.Nb),u=-1<c,r?r(u?0:-1):void 0!==s&&d(u?0:-1,s),C(function t(){for(var e,n=0,i=(new Date).getTime();it(l.d.ac);)if(++n%1e3==0&&200<(new Date).getTime()-i)return u&&(a=T(l.d.ac.$.g)/c,r?r(a):void 0!==s&&d(a,s)),C(t,0),0;u&&(r?r(1):void 0!==s&&d(1,s)),e=function(t){for(var e,n,i,o=0,r=0,a=t.length,s=[],u=[];o<a;++o,++r){if(128&(e=255&t[o]))if(192==(224&e)){if(a<=o+1)return t;if(128!=(192&(n=255&t[++o])))return t;u[r]=(31&e)<<6|63&n}else{if(224!=(240&e))return t;if(a<=o+2)return t;if(128!=(192&(n=255&t[++o])))return t;if(128!=(192&(i=255&t[++o])))return t;u[r]=(15&e)<<12|(63&n)<<6|63&i}else{if(!e)return t;u[r]=e}16383==r&&(s.push(String.fromCharCode.apply(String,u)),r=-1)}return 0<r&&(u.length=r,s.push(String.fromCharCode.apply(String,u))),s.join("")}(G(l.d.rc)),o?o(e):void 0!==s&&postMessage({action:2,cbn:s,result:e})},0)}}}(),CryptoJS=(this.LZMA=this.LZMA_WORKER=e,CryptoJS||function(s){var t={},e=t.lib={},n=e.Base={extend:function(t){l.prototype=this;var e=new l;return t&&e.mixIn(t),e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.$super.extend(this)}},u=e.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||o).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,t=t.sigBytes;if(this.clamp(),i%4)for(var o=0;o<t;o++)e[i+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(i+o)%4*8;else if(65535<n.length)for(o=0;o<t;o+=4)e[i+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=s.ceil(e/4)},clone:function(){var t=n.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(4294967296*s.random()|0);return u.create(e,t)}}),i=t.enc={},o=i.Hex={stringify:function(t){for(var e=t.words,t=t.sigBytes,n=[],i=0;i<t;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return u.create(n,e/2)}},r=i.Latin1={stringify:function(t){for(var e=t.words,t=t.sigBytes,n=[],i=0;i<t;i++)n.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return u.create(n,e)}},a=i.Utf8={stringify:function(t){try{return decodeURIComponent(escape(r.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return r.parse(unescape(encodeURIComponent(t)))}},c=e.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=u.create(),this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=a.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,i=e.sigBytes,o=this.blockSize,r=i/(4*o),t=(t?s.ceil(r):s.max((0|r)-this._minBufferSize,0))*o,i=s.min(4*t,i);if(t){for(var a=0;a<t;a+=o)this._doProcessBlock(n,a);a=n.splice(0,t),e.sigBytes-=i}return u.create(a,i)},clone:function(){var t=n.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});function l(){}e.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize(),this._hash},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:16,_createHelper:function(n){return function(t,e){return n.create(e).finalize(t)}},_createHmacHelper:function(n){return function(t,e){return d.HMAC.create(n,e).finalize(t)}}});var d=t.algo={};return t}(Math));function ohSnap(t,e,n){var i=$("#ohsnap"),o="",n=(n&&(o="<span class='"+n+"'></span> "),$('<div class="alert alert-'+e+'">'+o+t+"</div>"));i.append(n),n.on("click",function(){ohSnapX($(this))}),setTimeout(function(){ohSnapX(i.children(".alert").first())},"3000")}function ohSnapX(t){void 0!==t?t.fadeOut(300,function(){$(this).remove()}):$(".alert").remove()}function assert(t){"use strict";var e;if(!t||1!==arguments.length)throw e=(t=function(){try{throw Error("")}catch(t){return t}}().stack.split("\n")[4]).indexOf("at "),'"Assert Failed" at '+t.slice(e+2,t.length).trim()}function getUrlParameter(t,e){"use strict";e=e||location.href,t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===t?null:t[1]}function Automatune(t,e,n,i){"use strict";assert(4===arguments.length),this.domElement,this.playbackElement,this.playbackButtons,this.grid,this.updateTargets,this.updateInterval,this.tickMs,this.playing=!1,this.updateTargets=[],this.tickMs=Automatune.TICK_NORMAL,this.domElement=t,this.playbackElement=e,this.grid=new Automatune.Grid(this,i),new Automatune.Menu(this,n),this.playbackButtons={};for(var o=0;o<e.childNodes.length;o++){var r=e.childNodes[o];r.classList&&(r.classList.contains("playback-play")?this.playbackButtons.playButton=r:r.classList.contains("playback-pause")?this.playbackButtons.pauseButton=r:r.classList.contains("playback-reset")&&(this.playbackButtons.resetButton=r))}var a,s,u=this;$("#share-this-tune").click(function(){u.getSharingURL()}),assert(this.playbackButtons.playButton&&this.playbackButtons.pauseButton&&this.playbackButtons.resetButton),this.playbackButtons.playButton.onclick=this.play.bind(this),this.playbackButtons.pauseButton.onclick=this.pause.bind(this),this.playbackButtons.resetButton.onclick=this.reset.bind(this),void 0!==document.hidden?(a="hidden",s="visibilitychange"):void 0!==document.mozHidden?(a="mozHidden",s="mozvisibilitychange"):void 0!==document.msHidden?(a="msHidden",s="msvisibilitychange"):void 0!==document.webkitHidden&&(a="webkitHidden",s="webkitvisibilitychange"),document.addEventListener(s,function(){document[a]?(this.pause(),Howler.mute()):Howler.unmute()}.bind(this),!1)}!function(t){function u(t,e,n,i,o,r,a){return((t=t+(e&n|~e&i)+o+a)<<r|t>>>32-r)+e}function c(t,e,n,i,o,r,a){return((t=t+(e&i|n&~i)+o+a)<<r|t>>>32-r)+e}function l(t,e,n,i,o,r,a){return((t=t+(e^n^i)+o+a)<<r|t>>>32-r)+e}function d(t,e,n,i,o,r,a){return((t=t+(n^(e|~i))+o+a)<<r|t>>>32-r)+e}for(var e=CryptoJS,n=(i=e.lib).WordArray,i=i.Hasher,o=e.algo,f=[],r=0;r<64;r++)f[r]=4294967296*t.abs(t.sin(r+1))|0;o=o.MD5=i.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var i=t[o=e+n];t[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}for(var o,i=(o=this._hash.words)[0],r=o[1],a=o[2],s=o[3],n=0;n<64;n+=4)r=n<16?(i=u(i,r,a,s,t[e+n],7,f[n]),s=u(s,i,r,a,t[e+n+1],12,f[n+1]),a=u(a,s,i,r,t[e+n+2],17,f[n+2]),u(r,a,s,i,t[e+n+3],22,f[n+3])):n<32?(i=c(i,r,a,s,t[e+(n+1)%16],5,f[n]),s=c(s,i,r,a,t[e+(n+6)%16],9,f[n+1]),a=c(a,s,i,r,t[e+(n+11)%16],14,f[n+2]),c(r,a,s,i,t[e+n%16],20,f[n+3])):n<48?(i=l(i,r,a,s,t[e+(3*n+5)%16],4,f[n]),s=l(s,i,r,a,t[e+(3*n+8)%16],11,f[n+1]),a=l(a,s,i,r,t[e+(3*n+11)%16],16,f[n+2]),l(r,a,s,i,t[e+(3*n+14)%16],23,f[n+3])):(i=d(i,r,a,s,t[e+3*n%16],6,f[n]),s=d(s,i,r,a,t[e+(3*n+7)%16],10,f[n+1]),a=d(a,s,i,r,t[e+(3*n+14)%16],15,f[n+2]),d(r,a,s,i,t[e+(3*n+5)%16],21,f[n+3]));o[0]=o[0]+i|0,o[1]=o[1]+r|0,o[2]=o[2]+a|0,o[3]=o[3]+s|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;for(e[i>>>5]|=128<<24-i%32,e[14+(64+i>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),t=this._hash.words,e=0;e<4;e++)n=t[e],t[e]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}}),e.MD5=i._createHelper(o),e.HmacMD5=i._createHmacHelper(o)}(Math),!function(a,b){b.true=a,function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(t){void 0===a[t]&&(b=!0)})),!b)return}var c={},d={},e={},f=null;!function(i){function o(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear"}function n(e,t){var n=new o;return t&&(n.fill="both",n.duration="auto"),"number"!=typeof e||isNaN(e)?void 0!==e&&Object.getOwnPropertyNames(e).forEach(function(t){"auto"==e[t]||!("number"!=typeof n[t]&&"duration"!=t||"number"==typeof e[t]&&!isNaN(e[t]))||"fill"==t&&-1==l.indexOf(e[t])||"direction"==t&&-1==d.indexOf(e[t])||"playbackRate"==t&&1!==e[t]&&i.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(n[t]=e[t])}):n.duration=e,n}function r(a,s,u,c){return a<0||1<a||u<0||1<u?v:function(t){function e(t,e,n){return 3*t*(1-n)*(1-n)*n+3*e*(1-n)*n*n+n*n*n}if(0==t||1==t)return t;for(var n=0,i=1;;){var o=(n+i)/2,r=e(a,u,o);if(Math.abs(t-r)<.001)return e(s,c,o);r<t?n=o:i=o}}}function a(n,i){return function(t){var e;return 1<=t?1:(t+=i*(e=1/n))-t%e}}function s(t){var e=b.exec(t);return e?r.apply(this,e.slice(1).map(Number)):(e=g.exec(t))?a(Number(e[1]),{start:f,middle:p,end:h}[e[2]]):m[t]||v}function u(t){return t.duration*t.iterations}function c(t,e,n){return null==e?y:e<n.delay?_:e>=n.delay+t?w:x}var l="backwards|forwards|both|none".split("|"),d="reverse|alternate|alternate-reverse".split("|"),f=(o.prototype={_setMember:function(t,e){this["_"+t]=e,this._effect&&(this._effect._timingInput[t]=e,this._effect._timing=i.normalizeTimingInput(i.normalizeTimingInput(this._effect._timingInput)),this._effect.activeDuration=i.calculateActiveDuration(this._effect._timing),this._effect._animation)&&this._effect._animation._rebuildUnderlyingAnimation()},get playbackRate(){return this._playbackRate},set delay(t){this._setMember("delay",t)},get delay(){return this._delay},set endDelay(t){this._setMember("endDelay",t)},get endDelay(){return this._endDelay},set fill(t){this._setMember("fill",t)},get fill(){return this._fill},set iterationStart(t){this._setMember("iterationStart",t)},get iterationStart(){return this._iterationStart},set duration(t){this._setMember("duration",t)},get duration(){return this._duration},set direction(t){this._setMember("direction",t)},get direction(){return this._direction},set easing(t){this._setMember("easing",t)},get easing(){return this._easing},set iterations(t){this._setMember("iterations",t)},get iterations(){return this._iterations}},1),p=.5,h=0,m={ease:r(.25,.1,.25,1),"ease-in":r(.42,0,1,1),"ease-out":r(0,0,.58,1),"ease-in-out":r(.42,0,.58,1),"step-start":a(1,f),"step-middle":a(1,p),"step-end":a(1,h)},t="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",b=new RegExp("cubic-bezier\\("+t+","+t+","+t+","+t+"\\)"),g=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,v=function(t){return t},y=0,_=1,w=2,x=3;i.cloneTimingInput=function(t){if("number"==typeof t)return t;var e,n={};for(e in t)n[e]=t[e];return n},i.makeTiming=n,i.numericTimingToObject=function(t){return t="number"==typeof t?isNaN(t)?{duration:0}:{duration:t}:t},i.normalizeTimingInput=function(t,e){return(t=n(t=i.numericTimingToObject(t),e))._easing=s(t.easing),t},i.calculateActiveDuration=function(t){return Math.abs(u(t)/t.playbackRate)},i.calculateTimeFraction=function(t,e,n){var i,o,r,a=c(t,e,n);return null===(e=function(t,e,n,i,o){switch(i){case _:return"backwards"==e||"both"==e?0:null;case x:return n-o;case w:return"forwards"==e||"both"==e?t:null;case y:return null}}(t,n.fill,e,a,n.delay))?null:0===t?a===_?0:1:(a=n.iterationStart*n.duration,t=t,e=e,t=(n.playbackRate<0?e-t:e)*n.playbackRate+a,e=n.duration,r=u(n),a=a,i=n,a=1/0===(o=t)||o===-1/0||o-a==r&&i.iterations&&(i.iterations+i.iterationStart)%1==0?e:o%e,r=n.duration,i=a,o=n,t=0===(e=t)?0:i==r?o.iterationStart+o.iterations-1:Math.floor(e/r),i=t,o=n.duration,e=a,i="normal"==(r=n).direction||r.direction==(1<=i%2?"alternate-reverse":"alternate"),o*r.easing((i?e:o-e)/o)/n.duration)},i.calculatePhase=c,i.toTimingFunction=s}(c),function(f){function p(t,e){return t in n&&n[t][e]||e}var h={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},m=document.createElementNS("http://www.w3.org/1999/xhtml","div"),t={thin:"1px",medium:"3px",thick:"5px"},n={borderBottomWidth:t,borderLeftWidth:t,borderRightWidth:t,borderTopWidth:t,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:t,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};f.normalizeKeyframes=function(t){if(!Array.isArray(t)&&null!==t)throw new TypeError("Keyframes must be null or an array of keyframes");if(null==t)return[];for(var e=t.map(function(t){var e,n={};for(e in t){var i=t[e];if("offset"==e){if(null!=i&&(i=Number(i),!isFinite(i)))throw new TypeError("keyframe offsets must be numbers.")}else{if("composite"==e)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};i="easing"==e?f.toTimingFunction(i):""+i}c=u=s=a=r=o=void 0;var o=e,r=i,a=n,s=h[o];if(s)for(var u in m.style[o]=r,s){var u=s[u],c=m.style[u];a[u]=p(u,c)}else a[o]=p(o,r)}return null==n.offset&&(n.offset=null),null==n.easing&&(n.easing=f.toTimingFunction("linear")),n}),n=!0,i=-1/0,o=0;o<e.length;o++){var r=e[o].offset;if(null!=r){if(r<i)throw{code:DOMException.INVALID_MODIFICATION_ERR,name:"InvalidModificationError",message:"Keyframes are not loosely sorted by offset. Sort or specify offsets."};i=r}else n=!1}if(e=e.filter(function(t){return 0<=t.offset&&t.offset<=1}),!n){var a=e.length;null==e[a-1].offset&&(e[a-1].offset=1),1<a&&null==e[0].offset&&(e[0].offset=0);for(var s=0,u=e[0].offset,c=1;c<a;c++){var l=e[c].offset;if(null!=l){for(var d=1;d<c-s;d++)e[s+d].offset=u+(l-u)*d/(c-s);s=c,u=l}}}return e}}(c),function(r){var a={};r.isDeprecated=function(t,e,n,i){var i=i?"are":"is",o=new Date,e=new Date(e);return e.setMonth(e.getMonth()+3),!(o<e&&(t in a||console.warn("Web Animations: "+t+" "+i+" deprecated and will stop working on "+e.toDateString()+". "+n),a[t]=!0))},r.deprecated=function(t,e,n,i){var o=i?"are":"is";if(r.isDeprecated(t,e,n,i))throw new Error(t+" "+o+" no longer supported. "+n)}}(c),function(i,c){c.convertEffectInput=function(t){var e=function(t){for(var e,n,i={},o=0;o<t.length;o++)for(var r in t[o])"offset"!=r&&"easing"!=r&&"composite"!=r&&(e={offset:t[o].offset,easing:t[o].easing,value:t[o][r]},i[r]=i[r]||[],i[r].push(e));for(n in i){var a=i[n];if(0!=a[0].offset||1!=a[a.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return i}(i.normalizeKeyframes(t)),n=function(t){var e,n=[];for(e in t)for(var i=t[e],o=0;o<i.length-1;o++){var r=i[o].offset,a=i[o+1].offset,s=i[o].value,u=i[o+1].value;r==a&&(1==a?s=u:u=s),n.push({startTime:r,endTime:a,easing:i[o].easing,property:e,interpolation:c.propertyInterpolation(e,s,u)})}return n.sort(function(t,e){return t.startTime-e.startTime}),n}(e);return function(i,o){if(null!=o)n.filter(function(t){return o<=0&&0==t.startTime||1<=o&&1==t.endTime||o>=t.startTime&&o<=t.endTime}).forEach(function(t){var e=o-t.startTime,n=t.endTime-t.startTime,e=0==n?0:t.easing(e/n);c.apply(i,t.property,t.interpolation(e))});else for(var t in e)"offset"!=t&&"easing"!=t&&"composite"!=t&&c.clear(i,t)}}}(c,d),function(c){function r(t,e,n){l[n]=l[n]||[],l[n].push([t,e])}var l={},d=(c.addPropertiesHandler=function(t,e,n){for(var i=0;i<n.length;i++){var o=n[i];r(t,e,o),/-/.test(o)&&r(t,e,o.replace(/-(.)/g,function(t,e){return e.toUpperCase()}))}},{backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"});c.propertyInterpolation=function(t,e,n){var i;"initial"!=e&&"initial"!=n||(i=t.replace(/-(.)/g,function(t,e){return e.toUpperCase()}),"initial"==e&&(e=d[i]),"initial"==n&&(n=d[i]));for(var o=e==n?[]:l[t],r=0;o&&r<o.length;r++){var a=o[r][0](e),s=o[r][0](n);if(void 0!==a&&void 0!==s){var u,a=o[r][1](a,s);if(a)return u=c.Interpolation.apply(null,a),function(t){return 0==t?e:1==t?n:u(t)}}}return c.Interpolation(!1,!0,function(t){return t?n:e})}}(d),function(s,u){function c(e){function t(t){return s.calculateTimeFraction(n,t,e)}var n=s.calculateActiveDuration(e);return t._totalDuration=e.delay+n+e.endDelay,t._isCurrent=function(t){t=s.calculatePhase(n,t,e);return t===PhaseActive||t===PhaseBefore},t}u.KeyframeEffect=function(e,t,n){function i(){a(e,o)}var o,r=c(s.normalizeTimingInput(n)),a=u.convertEffectInput(t);return i._update=function(t){return null!==(o=r(t))},i._clear=function(){a(e,null)},i._hasSameTarget=function(t){return e===t},i._isCurrent=r._isCurrent,i._totalDuration=r._totalDuration,i},u.NullEffect=function(t){function e(){t&&(t(),t=null)}return e._update=function(){return null},e._totalDuration=0,e._isCurrent=function(){return!1},e._hasSameTarget=function(){return!1},e}}(c,d),function(r){function a(t,e,n){n.enumerable=!0,n.configurable=!0,Object.defineProperty(t,e,n)}function s(t){this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=t.style,this._length=0,this._isAnimatedProperty={};for(var e=0;e<this._style.length;e++){var n=this._style[e];this._surrogateStyle[n]=this._style[n]}this._updateIndices()}var t,e,n={cssText:1,length:1,parentRule:1},i={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},o={removeProperty:1,setProperty:1};for(t in s.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(t){for(var e={},n=0;n<this._surrogateStyle.length;n++)e[this._surrogateStyle[n]]=!0;this._surrogateStyle.cssText=t,this._updateIndices();for(var i,n=0;n<this._surrogateStyle.length;n++)e[this._surrogateStyle[n]]=!0;for(i in e)this._isAnimatedProperty[i]||this._style.setProperty(i,this._surrogateStyle.getPropertyValue(i))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(t){return function(){return this._surrogateStyle[t]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(t,e){this._style[t]=e,this._isAnimatedProperty[t]=!0},_clear:function(t){this._style[t]=this._surrogateStyle[t],delete this._isAnimatedProperty[t]}},i)s.prototype[t]=function(e,n){return function(){var t=this._surrogateStyle[e].apply(this._surrogateStyle,arguments);return n&&(this._isAnimatedProperty[arguments[0]]||this._style[e].apply(this._style,arguments),this._updateIndices()),t}}(t,t in o);for(e in document.documentElement.style)e in n||e in i||!function(e){a(s.prototype,e,{get:function(){return this._surrogateStyle[e]},set:function(t){this._surrogateStyle[e]=t,this._updateIndices(),this._isAnimatedProperty[e]||(this._style[e]=t)}})}(e);r.apply=function(t,e,n){var i=t;if(!i._webAnimationsPatchedStyle){var o=new s(i);try{a(i,"style",{get:function(){return o}})}catch(t){i.style._set=function(t,e){i.style[t]=e},i.style._clear=function(t){i.style[t]=""}}i._webAnimationsPatchedStyle=i.style}t.style._set(r.propertyName(e),n)},r.clear=function(t,e){t._webAnimationsPatchedStyle&&t.style._clear(r.propertyName(e))}}(d),function(n){window.Element.prototype.animate=function(t,e){return n.timeline._play(n.KeyframeEffect(this,t,e))}}(d),d.Interpolation=function(e,n,i){return function(t){return i(function t(e,n,i){if("number"==typeof e&&"number"==typeof n)return e*(1-i)+n*i;if("boolean"==typeof e&&"boolean"==typeof n)return i<.5?e:n;if(e.length!=n.length)throw"Mismatched interpolation arguments "+e+":"+n;for(var o=[],r=0;r<e.length;r++)o.push(t(e[r],n[r],i));return o}(e,n,t))}},function(d){function f(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],i=0;i<4;i++)for(var o=0;o<4;o++)for(var r=0;r<4;r++)n[i][o]+=e[i][r]*t[r][o];return n}d.composeMatrix=function(t,e,n,i,o){for(var r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],a=0;a<4;a++)r[a][3]=o[a];for(a=0;a<3;a++)for(var s=0;s<3;s++)r[3][a]+=t[s]*r[s][a];var u=i[0],c=i[1],l=i[2],i=i[3],d=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=(d[0][0]=1-2*(c*c+l*l),d[0][1]=2*(u*c-l*i),d[0][2]=2*(u*l+c*i),d[1][0]=2*(u*c+l*i),d[1][1]=1-2*(u*u+l*l),d[1][2]=2*(c*l-u*i),d[2][0]=2*(u*l-c*i),d[2][1]=2*(c*l+u*i),d[2][2]=1-2*(u*u+c*c),r=f(r,d),[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);for(n[2]&&(l[2][1]=n[2],r=f(r,l)),n[1]&&(l[2][1]=0,l[2][0]=n[0],r=f(r,l)),n[0]&&(l[2][0]=0,l[1][0]=n[0],r=f(r,l)),a=0;a<3;a++)for(s=0;s<3;s++)r[a][s]*=e[a];return 0==(i=r)[0][2]&&0==i[0][3]&&0==i[1][2]&&0==i[1][3]&&0==i[2][0]&&0==i[2][1]&&1==i[2][2]&&0==i[2][3]&&0==i[3][2]&&1==i[3][3]?[r[0][0],r[0][1],r[1][0],r[1][1],r[3][0],r[3][1]]:r[0].concat(r[1],r[2],r[3])},d.quat=function(t,e,n){var i,o,r,a=d.dot(t,e),s=(i=a,o=-1,[]);if((r=1)===(a=Math.max(Math.min(i,r),o)))s=t;else for(var u=Math.acos(a),c=+Math.sin(n*u)/Math.sqrt(1-a*a),l=0;l<4;l++)s.push(t[l]*(Math.cos(n*u)-a*c)+e[l]*c);return s}}(d),function(e,n){e.sequenceNumber=0;function o(t,e,n){this.target=t,this.currentTime=e,this.timelineTime=n,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=t,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()}n.Animation=function(t){this._sequenceNumber=e.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!1,this.onfinish=null,this._finishHandlers=[],this._effect=t,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},n.Animation.prototype={_ensureAlive:function(){this._inEffect=this._effect._update(this.playbackRate<0&&0===this.currentTime?-1:this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,n.timeline._animations.push(this))},_tickCurrentTime:function(t,e){t!=this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=0<this._playbackRate?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(t){t=+t,isNaN(t)||(n.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-t/this._playbackRate),this._currentTimePending=!1,this._currentTime!=t&&(this._tickCurrentTime(t,!0),n.invalidateEffects()))},get startTime(){return this._startTime},set startTime(t){t=+t,isNaN(t)||this._paused||this._idle||(this._startTime=t,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),n.invalidateEffects())},get playbackRate(){return this._playbackRate},set playbackRate(t){var e;t!=this._playbackRate&&(e=this.currentTime,this._playbackRate=t,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!=e)&&(this.currentTime=e)},get _isFinished(){return!this._idle&&(0<this._playbackRate&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._currentTime=0<this._playbackRate?0:this._totalDuration,this._startTime=null,n.invalidateEffects()),this._finishedFlag=!1,n.restart(),this._idle=!1,this._ensureAlive()},pause:function(){this._isFinished||this._paused||this._idle||(this._currentTimePending=!0),this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=0<this._playbackRate?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1)},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this.currentTime=0,this._startTime=null,this._effect._update(null),n.invalidateEffects(),n.restart())},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(t,e){"function"==typeof e&&"finish"==t&&this._finishHandlers.push(e)},removeEventListener:function(t,e){"finish"==t&&0<=(t=this._finishHandlers.indexOf(e))&&this._finishHandlers.splice(t,1)},_fireEvents:function(t){var e,n,i=this._isFinished;!i&&!this._idle||this._finishedFlag||(e=new o(this,this._currentTime,t),n=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]),setTimeout(function(){n.forEach(function(t){t.call(e.target,e)})},0)),this._finishedFlag=i},_tick:function(t){return this._idle||this._paused||(null==this._startTime?this.startTime=t-this._currentTime/this.playbackRate:this._isFinished||this._tickCurrentTime((t-this._startTime)*this.playbackRate)),this._currentTimePending=!1,this._fireEvents(t),!this._idle&&(this._inEffect||!this._finishedFlag)}}}(c,d),function(e,r){function n(e){var t=u;u=[],o(e=e<b.currentTime?b.currentTime:e),t.forEach(function(t){t[1](e)}),p&&o(e),i(),l=void 0}function a(t,e){return t._sequenceNumber-e._sequenceNumber}function t(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function i(){h.forEach(function(t){t()}),h.length=0}function o(e){f=!1;var t=r.timeline,n=(t.currentTime=e,t._animations.sort(a),d=!1,t._animations),i=(t._animations=[],[]),o=[],n=n.filter(function(t){return t._inTimeline=t._tick(e),(t._inEffect?o:i).push(t._effect),t._isFinished||t._paused||t._idle||(d=!0),t._inTimeline});h.push.apply(h,i),h.push.apply(h,o),t._animations.push.apply(t._animations,n),p=!1,d&&requestAnimationFrame(function(){})}var s=window.requestAnimationFrame,u=[],c=0;window.requestAnimationFrame=function(t){var e=c++;return 0==u.length&&s(n),u.push([e,t]),e},window.cancelAnimationFrame=function(e){u.forEach(function(t){t[0]==e&&(t[1]=function(){})})};var l=void 0,d=!(t.prototype={_play:function(t){t._timing=e.normalizeTimingInput(t.timing);t=new r.Animation(t);return t._idle=!1,(t._timeline=this)._animations.push(t),r.restart(),r.invalidateEffects(),t}}),f=!1,p=!(r.restart=function(){return d||(d=!0,requestAnimationFrame(function(){}),f=!0),f}),h=(r.invalidateEffects=function(){p=!0},[]),m=window.getComputedStyle,b=(Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){var t;return p&&(0<(t=l=null==l?performance.now():l)-b.currentTime&&(b.currentTime+=1e3/60*(Math.floor((t-b.currentTime)/(1e3/60))+1)),o(b.currentTime)),i(),m.apply(this,arguments)}}),new t);r.timeline=b}(c,d),function(t){function d(t,e){for(var n=0,i=0;i<t.length;i++)n+=t[i]*e[i];return n}function e(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function n(t){switch(t.t){case"rotatex":var e=t.d[0].rad||0,n=(t.d[0].deg||0)*Math.PI/180+e;return[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1];case"rotatey":e=t.d[0].rad||0,n=(t.d[0].deg||0)*Math.PI/180+e;return[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1];case"rotate":case"rotatez":e=t.d[0].rad||0,n=(t.d[0].deg||0)*Math.PI/180+e;return[Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var i=t.d[0],o=t.d[1],r=t.d[2],e=t.d[3].rad||0,n=(t.d[3].deg||0)*Math.PI/180+e,a=i*i+o*o+r*r,a=(0==a?(i=1,r=o=0):1!=a&&(i/=a=Math.sqrt(a),o/=a,r/=a),Math.sin(n/2)),s=a*Math.cos(n/2),a=a*a;return[1-2*(o*o+r*r)*a,2*(i*o*a+r*s),2*(i*r*a-o*s),0,2*(i*o*a-r*s),1-2*(i*i+r*r)*a,2*(o*r*a+i*s),0,2*(i*r*a+o*s),2*(o*r*a-i*s),1-2*(i*i+o*o)*a,0,0,0,0,1];case"scale":return[t.d[0],0,0,0,0,t.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0],0,0,0,0,1];case"scale3d":return[t.d[0],0,0,0,0,t.d[1],0,0,0,0,t.d[2],0,0,0,0,1];case"skew":var s=t.d[0].deg||0,a=t.d[0].rad||0,u=t.d[1].deg||0,c=t.d[1].rad||0,s=s*Math.PI/180+a,a=u*Math.PI/180+c;return[1,Math.tan(a),0,0,Math.tan(s),1,0,0,0,0,1,0,0,0,0,1];case"skewx":e=t.d[0].rad||0,n=(t.d[0].deg||0)*Math.PI/180+e;return[1,0,0,0,Math.tan(n),1,0,0,0,0,1,0,0,0,0,1];case"skewy":e=t.d[0].rad||0,n=(t.d[0].deg||0)*Math.PI/180+e;return[1,Math.tan(n),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,i=t.d[0].px||0,o=t.d[1].px||0,0,1];case"translatex":return[1,0,0,0,0,1,0,0,0,0,1,0,i=t.d[0].px||0,0,0,1];case"translatey":return[1,0,0,0,0,1,0,0,0,0,1,0,0,o=t.d[0].px||0,0,1];case"translatez":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=t.d[0].px||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,i=t.d[0].px||0,o=t.d[1].px||0,r=t.d[2].px||0,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,t.d[0].px?-1/t.d[0].px:0,0,0,0,1];case"matrix":return[t.d[0],t.d[1],0,0,t.d[2],t.d[3],0,0,0,0,1,0,t.d[4],t.d[5],0,1];case"matrix3d":return t.d}}var i=function(t){var e=[t.slice(0,4),t.slice(4,8),t.slice(8,12),t.slice(12,16)];if(1!==e[3][3])return null;for(var n=[],i=0;i<4;i++)n.push(e[i].slice());for(i=0;i<3;i++)n[i][3]=0;if(0===b(n))return!1;var t=[],o=(t=e[0][3]||e[1][3]||e[2][3]?(t.push(e[0][3]),t.push(e[1][3]),t.push(e[2][3]),t.push(e[3][3]),function(t,e){for(var n=[],i=0;i<4;i++){for(var o=0,r=0;r<4;r++)o+=t[r]*e[r][i];n.push(o)}return n}(t,[[(t=function(t){for(var e=1/b(t),n=t[0][0],i=t[0][1],o=t[0][2],r=t[1][0],a=t[1][1],s=t[1][2],u=t[2][0],c=t[2][1],l=t[2][2],d=[[(a*l-s*c)*e,(o*c-i*l)*e,(i*s-o*a)*e,0],[(s*u-r*l)*e,(n*l-o*u)*e,(o*r-n*s)*e,0],[(r*c-a*u)*e,(u*i-n*c)*e,(n*a-i*r)*e,0]],f=[],p=0;p<3;p++){for(var h=0,m=0;m<3;m++)h+=t[3][m]*d[m][p];f.push(h)}return f.push(1),d.push(f),d}(n))[0][0],t[1][0],t[2][0],t[3][0]],[t[0][1],t[1][1],t[2][1],t[3][1]],[t[0][2],t[1][2],t[2][2],t[3][2]],[t[0][3],t[1][3],t[2][3],t[3][3]]])):[0,0,0,1],e[3].slice(0,3)),r=[],a=(r.push(e[0].slice(0,3)),[]),s=(a.push(p(r[0])),r[0]=f(r[0]),[]),u=(r.push(e[1].slice(0,3)),s.push(d(r[0],r[1])),r[1]=h(r[1],r[0],1,-s[0]),a.push(p(r[1])),r[1]=f(r[1]),s[0]/=a[1],r.push(e[2].slice(0,3)),s.push(d(r[0],r[2])),r[2]=h(r[2],r[0],1,-s[1]),s.push(d(r[1],r[2])),r[2]=h(r[2],r[1],1,-s[2]),a.push(p(r[2])),r[2]=f(r[2]),s[1]/=a[2],s[2]/=a[2],l=r[2],[(u=r[1])[1]*l[2]-u[2]*l[1],u[2]*l[0]-u[0]*l[2],u[0]*l[1]-u[1]*l[0]]);if(d(r[0],u)<0)for(i=0;i<3;i++)a[i]*=-1,r[i][0]*=-1,r[i][1]*=-1,r[i][2]*=-1;var c,l=r[0][0]+r[1][1]+r[2][2]+1,u=1e-4<l?(c=.5/Math.sqrt(l),[(r[2][1]-r[1][2])*c,(r[0][2]-r[2][0])*c,(r[1][0]-r[0][1])*c,.25/c]):r[0][0]>r[1][1]&&r[0][0]>r[2][2]?[.25*(c=2*Math.sqrt(1+r[0][0]-r[1][1]-r[2][2])),(r[0][1]+r[1][0])/c,(r[0][2]+r[2][0])/c,(r[2][1]-r[1][2])/c]:r[1][1]>r[2][2]?(c=2*Math.sqrt(1+r[1][1]-r[0][0]-r[2][2]),[(r[0][1]+r[1][0])/c,.25*c,(r[1][2]+r[2][1])/c,(r[0][2]-r[2][0])/c]):(c=2*Math.sqrt(1+r[2][2]-r[0][0]-r[1][1]),[(r[0][2]+r[2][0])/c,(r[1][2]+r[2][1])/c,.25*c,(r[1][0]-r[0][1])/c]);return[o,a,s,u,t]};function b(t){return t[0][0]*t[1][1]*t[2][2]+t[1][0]*t[2][1]*t[0][2]+t[2][0]*t[0][1]*t[1][2]-t[0][2]*t[1][1]*t[2][0]-t[1][2]*t[2][1]*t[0][0]-t[2][2]*t[0][1]*t[1][0]}function f(t){var e=p(t);return[t[0]/e,t[1]/e,t[2]/e]}function p(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function h(t,e,n,i){return[n*t[0]+i*e[0],n*t[1]+i*e[1],n*t[2]+i*e[2]]}t.dot=d,t.makeMatrixDecomposition=function(t){return[i(0===(t=t).length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(n).reduce(e))]}}(d),function(r){function a(t,e){var n=t.exec(e);return n?[n=t.ignoreCase?n[0].toLowerCase():n[0],e.substr(n.length)]:void 0}function s(t,e){t=t(e=e.replace(/^\s*/,""));return t?[t[0],t[1].replace(/^\s*/,"")]:void 0}function t(e,t,n,i,o){for(var r=[],a=[],s=[],u=function(t,e){for(var n=t,i=e;n&&i;)i<n?n%=i:i%=n;return t*e/(n+i)}(i.length,o.length),c=0;c<u;c++){var l=t(i[c%i.length],o[c%o.length]);if(!l)return;r.push(l[0]),a.push(l[1]),s.push(l[2])}return[r,a,function(t){t=t.map(function(t,e){return s[e](t)}).join(n);return e?e(t):t}]}r.consumeToken=a,r.consumeTrimmed=s,r.consumeRepeated=function(t,e,n){t=s.bind(null,t);for(var i=[];;){var o=t(n);if(!o)return[i,n];if(i.push(o[0]),!(o=a(e,n=o[1]))||""==o[1])return[i,n];n=o[1]}},r.consumeParenthesised=function(t,e){for(var n=0,i=0;i<e.length&&(!/\s|,/.test(e[i])||0!=n);i++)if("("==e[i])n++;else if(")"==e[i]&&(0==--n&&i++,n<=0))break;return null==(t=t(e.substr(0,i)))?void 0:[t,e.substr(i)]},r.ignore=function(e){return function(t){t=e(t);return t&&(t[0]=void 0),t}},r.optional=function(n,i){return function(t){var e=n(t);return e||[i,t]}},r.consumeList=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=r.consumeTrimmed(t[i],e);if(!o||""==o[0])return;void 0!==o[0]&&n.push(o[0]),e=o[1]}return""==e?n:void 0},r.mergeNestedRepeated=t.bind(null,null),r.mergeWrappedNestedRepeated=t,r.mergeList=function(t,e,n){for(var i,o=[],r=[],a=[],s=0,u=0;u<n.length;u++)"function"==typeof n[u]?(i=n[u](t[s],e[s++]),o.push(i[0]),r.push(i[1]),a.push(i[2])):function(t){o.push(!1),r.push(!1),a.push(function(){return n[t]})}(u);return[o,r,function(t){for(var e="",n=0;n<t.length;n++)e+=a[n](t[n]);return e}]}}(d),function(l){function e(t){var n={inset:!1,lengths:[],color:null},t=l.consumeRepeated(function(t){var e;return(e=l.consumeToken(/^inset/i,t))?(n.inset=!0,e):(e=l.consumeLengthOrPercent(t))?(n.lengths.push(e[0]),e):(e=l.consumeColor(t))?(n.color=e[0],e):void 0},/^/,t);return t&&t[0].length?[n,t[1]]:void 0}var t=function(t,e,n,i){function o(t){return{inset:t,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var r=[],a=[],s=0;s<n.length||s<i.length;s++){var u=n[s]||o(i[s].inset),c=i[s]||o(n[s].inset);r.push(u),a.push(c)}return l.mergeNestedRepeated(t,e,r,a)}.bind(null,function(i,t){for(;i.lengths.length<Math.max(i.lengths.length,t.lengths.length);)i.lengths.push({px:0});for(;t.lengths.length<Math.max(i.lengths.length,t.lengths.length);)t.lengths.push({px:0});if(i.inset==t.inset&&!!i.color==!!t.color){for(var o,e,r=[],n=[[],0],a=[[],0],s=0;s<i.lengths.length;s++){var u=l.mergeDimensions(i.lengths[s],t.lengths[s],2==s);n[0].push(u[0]),a[0].push(u[1]),r.push(u[2])}return i.color&&t.color&&(e=l.mergeColors(i.color,t.color),n[1]=e[0],a[1]=e[1],o=e[2]),[n,a,function(t){for(var e=i.inset?"inset ":" ",n=0;n<r.length;n++)e+=r[n](t[0][n])+" ";return o&&(e+=o(t[1])),e}]}},", ");l.addPropertiesHandler(function(t){return(t=l.consumeRepeated(e,/^,/,t))&&""==t[1]?t[0]:void 0},t,["box-shadow","text-shadow"])}(d),function(t){function o(t){return t.toFixed(3).replace(".000","")}function r(t,e,n){return Math.min(e,Math.max(t,n))}function e(t){return/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?Number(t):void 0}function n(n,i){return function(t,e){return[t,e,function(t){return o(r(n,i,t))}]}}t.clamp=r,t.addPropertiesHandler(e,n(0,1/0),["border-image-width","line-height"]),t.addPropertiesHandler(e,n(0,1),["opacity","shape-image-threshold"]),t.addPropertiesHandler(e,function(t,e){return 0!=t?n(0,1/0)(t,e):void 0},["flex-grow","flex-shrink"]),t.addPropertiesHandler(e,function(t,e){return[t,e,function(t){return Math.round(r(1,1/0,t))}]},["orphans","widows"]),t.addPropertiesHandler(e,function(t,e){return[t,e,Math.round]},["z-index"]),t.parseNumber=e,t.mergeNumbers=function(t,e){return[t,e,o]},t.numberToString=o}(d),d.addPropertiesHandler(String,function(e,n){return"visible"==e||"visible"==n?[0,1,function(t){return t<=0?e:1<=t?n:"visible"}]:void 0},["visibility"]),function(i){function t(t){t=t.trim(),o.fillStyle="#000",o.fillStyle=t;var e=o.fillStyle;if(o.fillStyle="#fff",o.fillStyle=t,e==o.fillStyle)return o.fillRect(0,0,1,1),t=o.getImageData(0,0,1,1).data,o.clearRect(0,0,1,1),e=t[3]/255,[t[0]*e,t[1]*e,t[2]*e,e]}function e(t,e){return[t,e,function(t){if(t[3])for(var e=0;e<3;e++)t[e]=Math.round((n=t[e]/t[3],Math.max(0,Math.min(255,n))));var n;return t[3]=i.numberToString(i.clamp(0,1,t[3])),"rgba("+t.join(",")+")"}]}var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),o=(n.width=n.height=1,n.getContext("2d"));i.addPropertiesHandler(t,e,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","outline-color","text-decoration-color"]),i.consumeColor=i.consumeParenthesised.bind(null,t),i.mergeColors=e}(d),function(a,b){function c(a,b){if(b=b.trim().toLowerCase(),"0"==b&&0<="px".search(a))return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(t){return c[t]=null,"U"+t});for(var d="U("+a.source+")",e=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+d,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in c){var i=eval(b.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(d,"g"),"*0"));if(!isFinite(i))return;c[h]=i}return c}}}function d(t,n){return e(t,n,!0)}function e(e,n,i){var t,o=[];for(t in e)o.push(t);for(t in n)o.indexOf(t)<0&&o.push(t);return e=o.map(function(t){return e[t]||0}),n=o.map(function(t){return n[t]||0}),[e,n,function(n){var t=n.map(function(t,e){return 1==n.length&&i&&(t=Math.max(t,0)),a.numberToString(t)+o[e]}).join(" + ");return 1<n.length?"calc("+t+")":t}]}var f="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",g=c.bind(null,new RegExp(f,"g")),h=c.bind(null,new RegExp(f+"|%","g")),i=c.bind(null,/deg|rad|grad|turn/g),j=(a.parseLength=g,a.parseLengthOrPercent=h,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,h),a.parseAngle=i,a.mergeDimensions=e,a.consumeParenthesised.bind(null,g)),k=a.consumeRepeated.bind(void 0,j,/^/),l=a.consumeRepeated.bind(void 0,k,/^,/),m=(a.consumeSizePairList=l,function(t){t=l(t);return t&&""==t[1]?t[0]:void 0}),n=a.mergeNestedRepeated.bind(void 0,d," "),o=a.mergeNestedRepeated.bind(void 0,n,",");a.mergeNonNegativeSizePair=n,a.addPropertiesHandler(m,o,["background-size"]),a.addPropertiesHandler(h,d,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(h,e,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","text-indent","top","vertical-align","word-spacing"])}(d,f),function(i){function e(t){return i.consumeLengthOrPercent(t)||i.consumeToken(/^auto/,t)}function t(t){t=i.consumeList([i.ignore(i.consumeToken.bind(null,/^rect/)),i.ignore(i.consumeToken.bind(null,/^\(/)),i.consumeRepeated.bind(null,e,/^,/),i.ignore(i.consumeToken.bind(null,/^\)/))],t);return t&&4==t[0].length?t[0]:void 0}var n=i.mergeWrappedNestedRepeated.bind(null,function(t){return"rect("+t+")"},function(e,n){return"auto"==e||"auto"==n?[!0,!1,function(t){var t=t?e:n;return"auto"==t?"auto":(t=i.mergeDimensions(t,t))[2](t[0])}]:i.mergeDimensions(e,n)},", ");i.parseBox=t,i.mergeBoxes=n,i.addPropertiesHandler(t,n,["clip"])}(d),function(A){function t(t){return function(e){var n=0;return t.map(function(t){return t===i?e[n++]:t})}}function e(t){return t}function r(t){return t.toFixed(6).replace(".000000","")}function T(e,n){var i,o;return e.decompositionPair!==n&&(e.decompositionPair=n,i=A.makeMatrixDecomposition(e)),n.decompositionPair!==e&&(n.decompositionPair=e,o=A.makeMatrixDecomposition(n)),null==i[0]||null==o[0]?[[!1],[!0],function(t){return(t?n:e)[0].d}]:(i[0].push(0),o[0].push(1),[i,o,function(t){var e=A.quat(i[0][3],o[0][3],t[5]);return A.composeMatrix(t[0],t[1],t[2],e,t[4]).map(r).join(",")}])}function C(t){return t.replace(/[xy]/,"")}function k(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var i=null,p={px:0},h={deg:0},M={matrix:["NNNNNN",[i,i,0,0,i,i,0,0,0,0,1,0,i,i,0,1],e],matrix3d:["NNNNNNNNNNNNNNNN",e],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",t([i,i,1]),e],scalex:["N",t([i,1,1]),t([i,1])],scaley:["N",t([1,i,1]),t([1,i])],scalez:["N",t([1,1,i])],scale3d:["NNN",e],skew:["Aa",null,e],skewx:["A",null,t([i,h])],skewy:["A",null,t([h,i])],translate:["Tt",t([i,i,p]),e],translatex:["T",t([i,p,p]),t([i,p])],translatey:["T",t([p,i,p]),t([p,i])],translatez:["L",t([p,p,i])],translate3d:["TTL",e]};A.addPropertiesHandler(function(t){if("none"==(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*(\w+)\(([^)]*)\)/g,i=[],o=0;e=n.exec(t);){if(e.index!=o)return;var o=e.index+e[0].length,r=e[1],a=M[r];if(!a)return;var s=e[2].split(","),u=a[0];if(u.length<s.length)return;for(var c=[],l=0;l<u.length;l++){var d=s[l],f=u[l],d=d?{A:function(t){return"0"==t.trim()?h:A.parseAngle(t)},N:A.parseNumber,T:A.parseLengthOrPercent,L:A.parseLength}[f.toUpperCase()](d):{a:h,n:c[0],t:p}[f];if(void 0===d)return;c.push(d)}if(i.push({t:r,d:c}),n.lastIndex==t.length)return i}},function(t,e){var n=A.makeMatrixDecomposition&&!0,i=!1;if(!t.length||!e.length){t.length||(i=!0,t=e,e=[]);for(var o=0;o<t.length;o++){var r=t[o].t,a=t[o].d,s="scale"==r.substr(0,5)?1:0;e.push({t:r,d:a.map(function(t){if("number"==typeof t)return s;var e,n={};for(e in t)n[e]=s;return n})})}}var u,c,l=[],d=[],f=[];if(t.length!=e.length){if(!n)return;l=[(y=T(t,e))[0]],d=[y[1]],f=[["matrix",[y[2]]]]}else for(o=0;o<t.length;o++){var p=t[o].t,h=e[o].t,m=t[o].d,b=e[o].d,g=M[p],v=M[h];if(c=h,"perspective"==(u=p)&&"perspective"==c||("matrix"==u||"matrix3d"==u)&&("matrix"==c||"matrix3d"==c)){if(!n)return;var y=T([t[o]],[e[o]]);l.push(y[0]),d.push(y[1]),f.push(["matrix",[y[2]]])}else{if(p==h)r=p;else if(g[2]&&v[2]&&C(p)==C(h))r=C(p),m=g[2](m),b=v[2](b);else{if(!g[1]||!v[1]||k(p)!=k(h)){if(!n)return;l=[(y=T(t,e))[0]],d=[y[1]],f=[["matrix",[y[2]]]];break}r=k(p),m=g[1](m),b=v[1](b)}for(var _=[],w=[],x=[],S=0;S<m.length;S++){y=("number"==typeof m[S]?A.mergeNumbers:A.mergeDimensions)(m[S],b[S]);_[S]=y[0],w[S]=y[1],x.push(y[2])}l.push(_),d.push(w),f.push([r,x])}}return i&&(i=l,l=d,d=i),[l,d,function(t){return t.map(function(t,n){t=t.map(function(t,e){return f[n][1][e](t)}).join(",");return"matrix"==f[n][0]&&16==t.split(",").length&&(f[n][0]="matrix3d"),f[n][0]+"("+t+")"}).join(" ")}]},["transform"])}(d),function(e){function n(t){return t=100*Math.round(t/100),400===(t=e.clamp(100,900,t))?"normal":700===t?"bold":String(t)}e.addPropertiesHandler(function(t){return t=Number(t),isNaN(t)||t<100||900<t||t%100!=0?void 0:t},function(t,e){return[t,e,n]},["font-weight"])}(d),function(s){function u(t){return s.consumeToken(/^(left|center|right|top|bottom)\b/i,t)||s.consumeLengthOrPercent(t)}function t(t,e){e=s.consumeRepeated(u,/^/,e);if(e&&""==e[1]){e=e[0];if(e[0]=e[0]||"center",e[1]=e[1]||"center",3==t&&(e[2]=e[2]||{px:0}),e.length==t)if((/top|bottom/.test(e[0])||/left|right/.test(e[1]))&&(t=e[0],e[0]=e[1],e[1]=t),/left|right|center|Object/.test(e[0])&&/top|bottom|center|Object/.test(e[1]))return e.map(function(t){return"object"==typeof t?t:c[t]})}}function e(t){t=s.consumeRepeated(u,/^/,t);if(t){for(var e=t[0],n=[{"%":50},{"%":50}],i=0,o=!1,r=0;r<e.length;r++){var a=e[r];"string"==typeof a?(o=/bottom|right/.test(a),n[i={left:0,right:0,center:i,top:1,bottom:1}[a]]=c[a],"center"==a&&i++):(o&&((a=function(t){var e,n={};for(e in t)n[e]=-t[e];return n}(a))["%"]=(a["%"]||0)+100),n[i]=a,i++,o=!1)}return[n,t[1]]}}var c={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},n=s.mergeNestedRepeated.bind(null,s.mergeDimensions," "),n=(s.addPropertiesHandler(t.bind(null,3),n,["transform-origin"]),s.addPropertiesHandler(t.bind(null,2),n,["perspective-origin"]),s.consumePosition=e,s.mergeOffsetList=n,s.mergeNestedRepeated.bind(null,n,", "));s.addPropertiesHandler(function(t){return(t=s.consumeRepeated(e,/^,/,t))&&""==t[1]?t[0]:void 0},n,["background-position","object-position"])}(d),function(n){var i=n.consumeParenthesised.bind(null,n.parseLengthOrPercent),o=n.consumeRepeated.bind(void 0,i,/^/),t=n.mergeNestedRepeated.bind(void 0,n.mergeDimensions," "),r=n.mergeNestedRepeated.bind(void 0,t,",");n.addPropertiesHandler(function(t){var e=n.consumeToken(/^circle/,t);return e&&e[0]?["circle"].concat(n.consumeList([n.ignore(n.consumeToken.bind(void 0,/^\(/)),i,n.ignore(n.consumeToken.bind(void 0,/^at/)),n.consumePosition,n.ignore(n.consumeToken.bind(void 0,/^\)/))],e[1])):(e=n.consumeToken(/^ellipse/,t))&&e[0]?["ellipse"].concat(n.consumeList([n.ignore(n.consumeToken.bind(void 0,/^\(/)),o,n.ignore(n.consumeToken.bind(void 0,/^at/)),n.consumePosition,n.ignore(n.consumeToken.bind(void 0,/^\)/))],e[1])):(e=n.consumeToken(/^polygon/,t))&&e[0]?["polygon"].concat(n.consumeList([n.ignore(n.consumeToken.bind(void 0,/^\(/)),n.optional(n.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),n.consumeSizePairList,n.ignore(n.consumeToken.bind(void 0,/^\)/))],e[1])):void 0},function(t,e){return t[0]===e[0]?"circle"==t[0]?n.mergeList(t.slice(1),e.slice(1),["circle(",n.mergeDimensions," at ",n.mergeOffsetList,")"]):"ellipse"==t[0]?n.mergeList(t.slice(1),e.slice(1),["ellipse(",n.mergeNonNegativeSizePair," at ",n.mergeOffsetList,")"]):"polygon"==t[0]&&t[1]==e[1]?n.mergeList(t.slice(2),e.slice(2),["polygon(",t[1],r,")"]):void 0:void 0},["shape-outside"])}(d),function(t){function e(e,t){t.concat([e]).forEach(function(t){t in document.documentElement.style&&(n[e]=t)})}var n={};e("transform",["webkitTransform","msTransform"]),e("transformOrigin",["webkitTransformOrigin"]),e("perspective",["webkitPerspective"]),e("perspectiveOrigin",["webkitPerspectiveOrigin"]),t.propertyName=function(t){return n[t]||t}}(d)}()}({},function(){return this}()),Automatune.util={},Automatune.util.extend=function(t,e){"use strict";e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Automatune.util.setCSSRotation=function(t,e){"use strict";e="rotate("+-90*e+"deg)";t.style["-webkit-transform"]=e,t.style.transform=e},Automatune.util.rotateRight=function(t){"use strict";return 3===t?0:t+1},Automatune.util.rotateLeft=function(t){"use strict";return 0===t?3:t-1},Automatune.util.getOpposite=function(t){"use strict";return t==Automatune.O_RIGHT?Automatune.O_LEFT:t==Automatune.O_UP?Automatune.O_DOWN:t==Automatune.O_LEFT?Automatune.O_RIGHT:t==Automatune.O_DOWN?Automatune.O_UP:void assert(!1)},Automatune.util.getOrientationDelta=function(t){"use strict";return t==Automatune.O_RIGHT?{x:1,y:0}:t==Automatune.O_UP?{x:0,y:-1}:t==Automatune.O_LEFT?{x:-1,y:0}:t==Automatune.O_DOWN?{x:0,y:1}:void assert(!1)},Automatune.prototype.getClassName=function(){"use strict";return"Automatune"},Automatune.prototype.update=function(){"use strict";for(var t=0;t<this.updateTargets.length;t++)this.updateTargets[t].update()},Automatune.prototype.setTickMs=function(t){"use strict";this.tickMs=t;for(var e=0;e<this.updateTargets.length;e++)this.updateTargets[e].updateTickMs();this.playing&&(window.clearInterval(this.updateInterval),this.updateInterval=window.setInterval(this.update.bind(this),this.tickMs))},Automatune.prototype.getTickMs=function(){"use strict";return this.tickMs},Automatune.prototype.resetPlaybackButtons=function(){"use strict";this.playbackButtons.playButton.classList.remove("active"),this.playbackButtons.pauseButton.classList.remove("active"),this.playbackButtons.resetButton.classList.remove("active")},Automatune.prototype.play=function(){"use strict";this.playing||(this.playing=!0,this.resetPlaybackButtons(),this.playbackButtons.playButton.classList.add("active"),this.updateInterval=window.setInterval(this.update.bind(this),this.tickMs),this.update())},Automatune.prototype.pause=function(){"use strict";this.playing=!1,this.resetPlaybackButtons(),this.playbackButtons.pauseButton.classList.add("active"),window.clearInterval(this.updateInterval)},Automatune.prototype.reset=function(){},Automatune.prototype.createVisitor=function(t,e,n){"use strict";t=new Automatune.Visitor(this,t,e,n);this.updateTargets.push(t)},Automatune.prototype.destroyVisitor=function(t,e){"use strict";for(var n=0;n<this.updateTargets.length;n++){var i=this.updateTargets[n];i.pos.x===t&&i.pos.y===e&&(this.updateTargets.splice(n,1),n--,i.destroy())}},Automatune.prototype.newGrid=function(t){"use strict";for(var e=0;e<this.updateTargets.length;e++)this.updateTargets[e].destroy();this.updateTargets=[],this.grid.destroy(),this.grid=new Automatune.Grid(this,t)},Automatune.prototype.getSaveState=function(){"use strict";var n=this;return{info:"Automatune Save File",save:{version:"alpha1",data:{date:Date.now(),tickMs:n.tickMs,updateTargets:function(){for(var t=[],e=0;e<n.updateTargets.length;e++)t.push(n.updateTargets[e].getSaveState());return t}(),grid:n.grid.getSaveState()}}}},Automatune.prototype.applySaveState=function(t){"use strict";try{t=t.save.data,this.setTickMs(t.tickMs),this.newGrid(t.grid.size);for(var e=0;e<t.updateTargets.length;e++){var n=t.updateTargets[e];this.createVisitor(n.pos.x,n.pos.y,n.orientation)}this.grid.applySaveState(t.grid)}catch(t){throw console.error("Loading of save state failed. The save is either corrupt or incompatible with this version of Automatune."),console.error("The exception produced was: "),t}},Automatune.prototype.downloadSaveState=function(){"use strict";download(JSON.stringify(this.getSaveState(),null,4),"tune.atune","text/plain")},Automatune.prototype.getSharingURL=function(){"use strict";var t=JSON.stringify(this.getSaveState());LZMA.compress(t,1,function(t){for(var e in t)t[e]+=128;var n=String.fromCharCode.apply(null,t),n=encodeURIComponent(btoa(n)),i=CryptoJS.MD5(n).toString(CryptoJS.enc.Hex),n=window.location.href.split("?")[0]+"?state="+n+"&checksum="+i,i="<div><p>Here's the URL of your song in its current state!<br />("+(-1!=navigator.userAgent.indexOf("Mac OS X")?"cmd":"ctrl")+"-c to copy it)</p><input type='text' style='width: 100%;' onfocus='this.select();' onmouseup='return false;' value='"+n+"'></div>";$(i).dialog()})},Automatune.prototype.loadFromUrlComponent=function(t){"use strict";for(var e=this,n=atob(decodeURIComponent(t)),i=[],o=0;o<n.length;o++)i.push(n.charCodeAt(o)-128);LZMA.decompress(i,function(t){e.applySaveState(JSON.parse(t))})},$(document).ready(function(){"use strict";var t=new Automatune(document.getElementById("automatune"),document.getElementsByClassName("playback-controls")[0],document.getElementById("menubar"),7),e=!1;if(-1!==window.location.href.indexOf("?state="))try{var n=getUrlParameter("state"),i=getUrlParameter("checksum");if(CryptoJS.MD5(n).toString(CryptoJS.enc.Hex)!==i)throw"URL checksum mismatch";t.loadFromUrlComponent(getUrlParameter("state")),history&&history.pushState({},"",window.location.href.split("?")[0]),e=!0}catch(t){$("<p>Sorry, that URL seems to be invalid, so we couldn't load that tune :(</p>").dialog(),console.error("Loading of save state from URL failed. The URL is either corrupt or contains a save that is incompatible with this version of Automatune."),console.error("The exception produced was: "),e=!1}e||t.createVisitor(3,4,Automatune.O_RIGHT),Automatune.browserSupported&&t.play()}),Automatune.browserSupported=(bowser.chrome||bowser.firefox||bowser.msie&&11<=bowser.version)&&!bowser.mobile&&!bowser.tablet,Automatune.Component=function(t,e){"use strict";assert(2===arguments.length),this.parentCell,this.orientation,this.domElement,this.orientation=e,this.parentCell=t,this.domElement=document.createElement("div"),this.domElement.className="gridCellProperty",this.parentCell.domElement.insertBefore(this.domElement,this.parentCell.domElement.firstChild),this.setOrientation(this.orientation),window.setTimeout(function(){this.domElement.classList.add("active")}.bind(this),160)},Automatune.Component.prototype.getClassName=function(){"use strict";return"Automatune.Component"},Automatune.Component.prototype.appendTo=function(t){},Automatune.Component.prototype.setOrientation=function(t){"use strict";this.orientation=t,Automatune.util.setCSSRotation(this.domElement,this.orientation)},Automatune.Component.prototype.rotateRight=function(){"use strict";var t=this.orientation,t=(this.orientation=Automatune.util.rotateRight(this.orientation),Automatune.util.setCSSRotation(this.domElement,this.orientation),-90*t),e=this.orientation==Automatune.O_RIGHT?-360:-90*this.orientation;this.domElement.animate([{transform:"rotate("+t+"deg)"},{transform:"rotate("+e+"deg)"}],{duration:200,easing:"ease-out"})},Automatune.Component.prototype.rotateLeft=function(){"use strict";this.orientation=Automatune.util.rotateLeft(this.orientation),Automatune.util.setCSSRotation(this.domElement,this.orientation)},Automatune.Component.prototype.onVisit=function(t){"use strict";throw"onVisit called on a Component that does not implement onVisit."},Automatune.Component.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Component_Arrow=function(t,e){"use strict";assert(2===arguments.length),Automatune.Component.call(this,t,e),this.img=document.createElement("img"),this.img.src="images/arrow.svg",this.domElement.appendChild(this.img)},Automatune.util.extend(Automatune.Component,Automatune.Component_Arrow),Automatune.Component_Arrow.prototype.getClassName=function(){"use strict";return"Automatune.Component_Arrow"},Automatune.Component_Arrow.prototype.destroy=function(){"use strict";this.domElement.removeChild(this.img),Automatune.Component.prototype.destroy.call(this)},Automatune.Component_Arrow.prototype.onVisit=function(t){"use strict";t.orientation=this.orientation},Automatune.Component_Arrow.prototype.getSaveState=function(){"use strict";return{instanceOf:this.getClassName(),orientation:this.orientation}},Automatune.Component_Arrow.constructFromSaveState=function(t,e){"use strict";return new Automatune.Component_Arrow(t,e.orientation)},Automatune.O_RIGHT=0,Automatune.O_UP=1,Automatune.O_LEFT=2,Automatune.O_DOWN=3,Automatune.TICK_SLOW=1e3,Automatune.TICK_NORMAL=500,Automatune.TICK_FAST=250,Automatune.TICK_FASTEST=125,Automatune.Grid=function(t,e){"use strict";assert(2===arguments.length),this.parentGame,this.domElement,this.gridCells,this.gridSize,this.cellCSSWidth,this.cellCSSSpacing,this.parentGame=t,this.domElement=document.createElement("div"),this.domElement.className="gridContainer",this.parentGame.domElement.appendChild(this.domElement),this.gridSize=e,this.cellCSSSpacing=10/this.gridSize,this.cellCSSWidth=(100-this.cellCSSSpacing)/this.gridSize-this.cellCSSSpacing,this.gridCells=new Array(e);for(var n=0;n<e;n++){for(var i=new Array(e),o=0;o<e;o++)i[o]=new Automatune.GridCell(this,n,o);this.gridCells[n]=i}},Automatune.Grid.prototype.getClassName=function(){"use strict";return"Automatune.Grid"},Automatune.Grid.prototype.getGridSize=function(){"use strict";return this.gridSize},Automatune.Grid.prototype.isInBounds=function(t,e){"use strict";return 0<=t&&t<this.gridSize&&0<=e&&e<this.gridSize},Automatune.Grid.prototype.getCell=function(t,e){"use strict";return this.gridCells[t][e]},Automatune.Grid.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Grid.prototype.getSaveState=function(){"use strict";return{size:this.gridSize,gridCells:function(){for(var t=[],e=0;e<this.gridSize;e++)for(var n=0;n<this.gridSize;n++)t.push(this.gridCells[e][n].getSaveState());return t}.call(this)}},Automatune.Grid.prototype.applySaveState=function(t){"use strict";for(var e=this.getGridSize(),n=0;n<t.gridCells.length;n++)this.getCell(Math.floor(n/e),n%e).applySaveState(t.gridCells[n])},Automatune.GridCell=function(t,e,n){"use strict";assert(3===arguments.length),this.parentGrid,this.domElement,this.modifiersElement,this.pos,this.modifiers,this.component,this.parentGrid=t,this.pos={x:e,y:n},this.modifiers=[],this.component=null;var t=this.parentGrid.getGridSize(),i=10/t,t=(100-i)/t-i,e=(this.domElement=document.createElement("div"),this.domElement.setAttribute("data-pos-x",e),this.domElement.setAttribute("data-pos-y",n),this.domElement.className="gridCellDiv",(t+i)*e+i),n=(t+i)*n+i;this.domElement.style.left=e+"%",this.domElement.style.top=n+"%",this.domElement.style.width=t+"%",this.domElement.style.height=t+"%",this.domElement.style.padding=i+"%",this.modifiersElement=document.createElement("div"),this.modifiersElement.className="modifiersContainer",this.domElement.appendChild(this.modifiersElement),this.parentGrid.domElement.appendChild(this.domElement),this.domElement.onclick=this.onClick.bind(this)},Automatune.GridCell.prototype.getClassName=function(){"use strict";return"Automatune.GridCell"},Automatune.GridCell.prototype.addModifier=function(t){"use strict";this.modifiers.push(t)},Automatune.GridCell.prototype.removeModifier=function(t){"use strict";for(var e=0;e<this.modifiers.length;e++)if(this.modifiers[e].getClassName()===t)return void this.modifiers.splice(e,1)},Automatune.GridCell.prototype.removeModifiers=function(t){"use strict";for(var e=0;e<this.modifiers.length;e++){var n=this.modifiers[e];n.getClassName()===t&&(this.modifiers.splice(e,1),e--,n.destroy())}},Automatune.GridCell.prototype.hasModifier=function(t){"use strict";for(var e=0;e<this.modifiers.length;e++)if(this.modifiers[e].getClassName()===t)return!0;return!1},Automatune.GridCell.prototype.getModifier=function(t){},Automatune.GridCell.prototype.hasComponent=function(t){"use strict";return null!==this.component},Automatune.GridCell.prototype.getComponent=function(){"use strict";return this.component},Automatune.GridCell.prototype.setComponent=function(t){"use strict";this.destroyComponent(),this.component=t,this.domElement.classList.add("active")},Automatune.GridCell.prototype.destroyComponent=function(){"use strict";this.component&&this.component.destroy(),this.component=null,this.domElement.classList.remove("active")},Automatune.GridCell.prototype.getCSSPosition=function(){"use strict";var t=this.parentGrid;return{x:(t.cellCSSWidth+t.cellCSSSpacing)*this.pos.x+t.cellCSSSpacing,y:(t.cellCSSWidth+t.cellCSSSpacing)*this.pos.y+t.cellCSSSpacing}},Automatune.GridCell.prototype.onVisit=function(t){"use strict";this.component&&this.component.onVisit(t);for(var e=0;e<this.modifiers.length;e++)this.modifiers[e].onVisit(t)},Automatune.GridCell.prototype.onClick=function(){"use strict";this.hasComponent()?this.getComponent().rotateRight():this.setComponent(new Automatune.Component_Arrow(this,Automatune.O_RIGHT))},Automatune.GridCell.prototype.getSaveState=function(){"use strict";return{component:this.component?this.component.getSaveState():null,modifiers:function(){for(var t=[],e=0;e<this.modifiers.length;e++)t.push(this.modifiers[e].getSaveState());return t}.call(this)}},Automatune.GridCell.prototype.applySaveState=function(t){"use strict";if(t.component){var e=t.component.instanceOf.split(".")[1];if("Component"!==e.split("_")[0]||!Automatune[e])throw"Unexpected Component type";e=Automatune[e].constructFromSaveState(this,t.component);this.setComponent(e)}for(var n=0;n<t.modifiers.length;n++){var i=t.modifiers[n].instanceOf.split(".")[1];if("Modifier"!==i.split("_")[0]||!Automatune[i])throw"Unexpected Modifier type";i=Automatune[i].constructFromSaveState(this,t.modifiers[n]);this.addModifier(i)}},Automatune.Menu=function(t,e){"use strict";assert(2===arguments.length),this.parentGame,this.parentGame=t;var t=$(t.domElement),e=$(e),s=this;t.contextmenu({delegate:".gridCellDiv",menu:[function(){for(var t,e,o=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C"],n={title:"Add Note",children:[]},i=7;1<=i;i--)n.children.push({title:(e=void 0,e="Octave "+(t=i),1===t?e+" (Lowest)":3===t?e+" (Mid)":7===t?e+" (Highest)":e),children:function(t){for(var e=[],n=o.length-1;0<=n;n--){var i=o[n],i=n===o.length-1?i+(t+1):i+t;e.push({title:i,cmd:"pitch."+i})}return e}(i)});return n}(),{title:"Delete&nbsp;All&nbsp;Notes",cmd:"pitch.delete"},{title:"---"},{title:"Delete Component",cmd:"delete_component"},{title:"---"},{title:"Create New Visitor",cmd:"new_visitor"},{title:"Delete Visitor",cmd:"delete_visitor"}],select:function(t,e){for(var n=e.target[0];!n.classList.contains("gridCellDiv");)assert((n=n.parentNode)!=document.body);var i=parseInt(n.getAttribute("data-pos-x"),10),o=parseInt(n.getAttribute("data-pos-y"),10),r=s.parentGame.grid.getCell(i,o),a=e.cmd.split(".");switch(a[0]){case"pitch":"delete"===a[1]?r.removeModifiers("Automatune.Modifier_Note"):r.addModifier(new Automatune.Modifier_Note(r,a[1]));break;case"new_visitor":s.parentGame.createVisitor(i,o,Automatune.O_RIGHT);break;case"delete_component":s.parentGame.grid.getCell(i,o).destroyComponent();break;case"delete_visitor":s.parentGame.destroyVisitor(i,o);break;default:alert("Menu item not yet implemented")}}}),e.find("> .menu-automatune").contextmenu({delegate:"span",menu:[{title:"About Automatune",cmd:"about"}],select:function(t,e){"about"===e.cmd?$("#automatune-about").dialog("open"):alert("Menu item not implemented")},autoTrigger:!1}),$("#automatune-about").dialog({autoOpen:!1}),e.find("> .menu-file").contextmenu({delegate:"span",menu:[{title:"New",children:[{title:"Small&nbsp;(5x5)",cmd:"new.small"},{title:"Medium&nbsp;(7x7)",cmd:"new.medium"},{title:"Large&nbsp;(9x9)",cmd:"new.large"},{title:"X&#8209;Large&nbsp;(11x11)",cmd:"new.xlarge"},{title:"XX&#8209;Large&nbsp;(15x15)",cmd:"new.xxlarge"}]},{title:"---"},{title:"Share via URL...",cmd:"share"},{title:"---"},{title:"Open from File",cmd:"open"},{title:"Save to File",cmd:"save"},{title:"---"},{title:"Open Example (Not Yet Implemented)",disabled:!0}],select:function(t,e){var n,i=e.cmd.split(".");switch(i[0]){case"new":switch(i[1]){case"small":n=5;break;case"medium":n=7;break;case"large":n=9;break;case"xlarge":n=11;break;case"xxlarge":n=15;break;default:return void alert("Menu item not implemented")}var o=$(['<div title="Create new Automatune?">',"<p>Are you sure you want to create a new tune? Any unsaved progress will be lost.</p>","</div>"].join(""));$(s.parentGame.domElement).append(o),o.dialog({resizable:!1,width:500,modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},"Create New Tune":function(){s.parentGame.newGrid(n),s.parentGame.createVisitor(Math.floor(n/2),Math.floor(n/2),Automatune.O_RIGHT),$(this).dialog("close")}},open:function(){$(this).parent().find("button:nth-child(2)").focus()}});break;case"open":var r=$(['<div title="Open an Automatune">',"<p>Choose a file to open.</p>",'<input class="openInput" type="file" />','<p class="youGottaChoose" style="display: none; color: red;">',"Please select a file before continuing.","</p>","</div>"].join(""));$(s.parentGame.domElement).append(r),r.dialog({resizable:!1,width:500,modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},Open:function(){var t=r.find(".openInput")[0],e=new FileReader;t.files.length?(t=t.files[0],e.readAsText(t),$(e).on("load",function(t){t=JSON.parse(t.target.result),s.parentGame.applySaveState(t)}),$(this).dialog("close")):r.find(".youGottaChoose").css("display","block")}},open:function(){$(this).parent().find("button:nth-child(2)").focus()}});break;case"save":s.parentGame.downloadSaveState();break;case"share":s.parentGame.getSharingURL();break;default:alert("Menu item not implemented")}},autoTrigger:!1}),e.find("> .menu-edit").contextmenu({delegate:"span",menu:[{title:"Select All (Not Yet Implemented)",cmd:"selectall",disabled:!0},{title:"Copy (Not Yet Implemented)",cmd:"copy",disabled:!0},{title:"Paste (Not Yet Implemented)",cmd:"paste",disabled:!0}],select:function(t,e){console.log("select "+e.cmd+" on ",e.target)},autoTrigger:!1}),e.find("> .menu-sound").contextmenu({delegate:"span",menu:[{title:"Volume",children:[{title:"10&nbsp;(Highest)",cmd:"volume.10"},{title:"9",cmd:"volume.9"},{title:"8",cmd:"volume.8"},{title:"7",cmd:"volume.7"},{title:"6",cmd:"volume.6"},{title:"5",cmd:"volume.5"},{title:"4",cmd:"volume.4"},{title:"3",cmd:"volume.3"},{title:"2",cmd:"volume.2"},{title:"1&nbsp;(Lowest)",cmd:"volume.1"}]},{title:"Tempo",children:[{title:"Slow",cmd:"tempo.slow"},{title:"Normal",cmd:"tempo.normal"},{title:"Fast",cmd:"tempo.fast"},{title:"Fastest",cmd:"tempo.fastest"}]},{title:"Enable Metronome (Not Yet Implemented)",cmd:"metronome",disabled:!0}],select:function(t,e){console.log("select "+e.cmd+" on ",e.target);var n=e.cmd.split(".");switch(n[0]){case"volume":var i=.1*parseInt(n[1],10);Howler.volume(i*i),ohSnap("Volume "+n[1],"black");break;case"tempo":switch(n[1]){case"slow":s.parentGame.setTickMs(Automatune.TICK_SLOW),ohSnap("Tempo: Slow","black");break;case"normal":s.parentGame.setTickMs(Automatune.TICK_NORMAL),ohSnap("Tempo: Normal","black");break;case"fast":s.parentGame.setTickMs(Automatune.TICK_FAST),ohSnap("Tempo: Fast","black");break;case"fastest":s.parentGame.setTickMs(Automatune.TICK_FASTEST),ohSnap("Tempo: Fastest","black")}break;default:alert("Menu item not yet implemented")}},autoTrigger:!1}),e.find("> .menu-help").contextmenu({delegate:"span",menu:[{title:"View Tutorial Video",cmd:"tutorialvideo"}],select:function(t,e){"tutorialvideo"===e.cmd&&window.open("https://www.youtube.com/watch?v=rU6m4N4Okv8","_blank")},autoTrigger:!1}),Howler.volume(.25),e.find("> li").click(function(){$(this).contextmenu("open",$(this).find("span"))}),Automatune.browserSupported||$("#automatune-unsupported").dialog()},Automatune.Modifier=function(t){"use strict";assert(1===arguments.length),this.parentCell,this.parentCell=t},Automatune.Modifier.prototype.getClassName=function(){"use strict";return"Automatune.Modifier"},Automatune.Modifier.prototype.appendTo=function(t){},Automatune.Modifier.prototype.onVisit=function(t){"use strict";throw"onVisit called on a Modifier that does not implement onVisit."},Automatune.Modifier.prototype.destroy=function(){},Automatune.Modifier_Note=function(t,e){"use strict";assert(2===arguments.length),Automatune.Modifier.call(this,t),this.domElement,this.noteName,this.howl,this.noteName=e;t="snd/piano/Piano.mf.";this.howl=new Howl({urls:[t+e+".mp3",t+e+".ogg"],volume:.7}),this.domElement=document.createElement("div"),this.domElement.className="tileicon note",this.domElement.title=this.noteName,this.parentCell.modifiersElement.appendChild(this.domElement)},Automatune.util.extend(Automatune.Modifier,Automatune.Modifier_Note),Automatune.Modifier_Note.prototype.getClassName=function(){"use strict";return"Automatune.Modifier_Note"},Automatune.Modifier_Note.prototype.onVisit=function(t){"use strict";this.howl.play();var e,n=document.createElement("div");n.classList.add("floatnote"),this.parentCell.domElement.appendChild(n),(e=n).animate([{transform:"scale(0.15)",opacity:1},{transform:"scale(1.75)",opacity:0}],{duration:1e3}).onfinish=function(t){e.parentNode.removeChild(e)}},Automatune.Modifier_Note.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Modifier_Note.prototype.getSaveState=function(){"use strict";return{instanceOf:this.getClassName(),noteName:this.noteName}},Automatune.Modifier_Note.constructFromSaveState=function(t,e){"use strict";return new Automatune.Modifier_Note(t,e.noteName)},Automatune.Visitor=function(t,e,n,i){"use strict";assert(4===arguments.length),this.parentGame,this.domElement,this.pos,this.orientation,this.parentGame=t,this.pos={x:e,y:n},this.orientation=i,this.domElement=document.createElement("div"),this.domElement.className="gridVisitor";t=this.parentGame.grid;this.domElement.style.width=t.cellCSSWidth+"%",this.domElement.style.height=t.cellCSSWidth+"%",this.updateCSSPosition(),this.parentGame.domElement.appendChild(this.domElement),this.updateTickMs()},Automatune.Visitor.prototype.getClassName=function(){"use strict";return"Automatune.Visitor"},Automatune.Visitor.prototype.update=function(){"use strict";this.parentGame.grid.getCell(this.pos.x,this.pos.y).onVisit(this);var t=this.parentGame.grid,e=Automatune.util.getOrientationDelta(this.orientation);t.isInBounds(this.pos.x+e.x,this.pos.y+e.y)||(this.orientation=Automatune.util.getOpposite(this.orientation),e=Automatune.util.getOrientationDelta(this.orientation)),this.pos={x:this.pos.x+e.x,y:this.pos.y+e.y},this.updateCSSPosition()},Automatune.Visitor.prototype.updateCSSPosition=function(){"use strict";var t=this.parentGame.grid.cellCSSWidth,e=this.parentGame.grid.getCell(this.pos.x,this.pos.y).getCSSPosition(),t=100/t,t="translate("+(e={x:e.x*t,y:e.y*t}).x+"%, "+e.y+"%)";this.domElement.style["-webkit-transform"]=t,this.domElement.style.transform=t},Automatune.Visitor.prototype.updateTickMs=function(){"use strict";var t=this.parentGame.getTickMs();this.domElement.style["webkit-transition"]="-webkit-transform "+t+"ms linear",this.domElement.style.transition="transform "+t+"ms linear"},Automatune.Visitor.prototype.destroy=function(){"use strict";this.domElement.parentNode.removeChild(this.domElement)},Automatune.Visitor.prototype.getSaveState=function(){"use strict";return{pos:this.pos,orientation:this.orientation}};